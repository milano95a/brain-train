// server injected code
/* Debug info: {"server":"WEB508","utc_time":"2015-04-13T07:58:04.373Z","src_ip":"46.33.74.169","method":"HTTP/GET","api_key":"2_Y8Ou2zve7eSZI-lzS_Sx1CPu9ZO65T9xjCUz9vX5C60PxafAuK2Z5fPvO_tmfs7D","site_found":true} */
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
if (!gigya.__initialized) {
gigya.__initialized = true;
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'5.4.1',time:'Sun 04/12/2015 17:54:51.01'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={"authMode":"cookie","baseDomains":"goal.com,goal.gearbox.performgroup.com","ssoKey":"2_Y8Ou2zve7eSZI-lzS_Sx1CPu9ZO65T9xjCUz9vX5C60PxafAuK2Z5fPvO_tmfs7D"};
    gigya.partnerSettings.plugins={"apiDomain":"US1.gigya.com"};
}
gigya.providersConfig = {};
gigya.abTesting = null;
gigya.samlConfig = {"errorPageURL":null,"proxyPageURL":null}
//end server injected code
// API adapters
var gigya;
(function(b){(function(f){(function(f){(function(d){(function(d){function k(a,g){g=b.utils.object.clone(g);if(b.partnerSettings.ssoKey){g||(g={});var d=g.callback;g.callback=function(e){f.parentNode.removeChild(f);b.log.addLog("SSO: About to invoke callback for "+a+" with this response",e);d&&d(e)};g.m=a;g.d=e;g.lid=b.utils.xd._flashListenerID;b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(g.lid=b.thisScript.globalConf.legacyCrossSiteMethod+":"+
b.utils.xd._flashListenerID);g.callbackID="gig_sso_cb"+(new Date).getTime()+"_"+h++;b.utils.xd.addMessageListener(g.callbackID,{},!1,g.callback);delete g.callback;g.sAPIKey=b.thisScript.APIKey;var k=b.utils.keyValue.serialize(g),f=c(g.callbackID),q=function(){f.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+b.partnerSettings.ssoKey+"&version=1#"+k;b.utils.DOM.removeEventListener(f,"load",q)};b.utils.DOM.addEventListener(f,"load",q);b.log.addLog("SSO: Calling "+a,{SSOKey:b.partnerSettings.ssoKey,
params:g});document.body?b.utils.DOM.appendToBody(f):b.utils.functions.invokeOnPageLoad(function(){return b.utils.DOM.appendToBody(f)})}else g&&g.callback&&g.callback()}function c(a){var e=document.getElementById("gig_sso"),e=document.createElement("iframe");b.localInfo.isIOS||b.localInfo.isIOSChrome||b.localInfo.isAndroid?(e.style.width="0px",e.style.height="0px",e.style.display="none"):(e.style.width="30px",e.style.height="10px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px");
e.id=b.localInfo.isIE8?"gig_sso_"+a:"gig_sso";return e}function a(a){k("setToken",a)}var e=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],h=0;d.getGroupToken=function(a){k("getToken",a)};d.setGroupTokenFromResponse=function(b,e,h){b.sessionInfo&&(b=b.sessionInfo);var c=b.expires_in,c=null==c||""===c||isNaN(c)?47304E7:0==c?null:1E3*c,d=new Date;d.setTime(d.getTime()+c);a({lt:b.login_token,expiration:null==c?0:d.getTime(),legacyCrossSiteMethod:h,callback:e})};
d.setGroupToken=a;d.logout=function(b){k("logout",b)};d.removeGroupToken=function(b){k("removeToken",b)}})(d.sso||(d.sso={}))})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(d){var f=function(){function d(b,a,e,h,r,g){"undefined"===typeof g&&(g={});this.id=b;this.baseUrl=a;this.methodName=e;this.params=h;this.callback=r;this.settings=g}d.prototype.getUrl=function(){return this.baseUrl+"/"+this.methodName};d.prototype.send=function(b){};d.prototype.getAuthParams=function(){var c={};if(this.params.oauth_token)this.params.authMode="token";else if(!this.params.noAuth){var a=b._.apiAdapters.web.tokenStore.get(this.params.APIKey);
if(a){this.sentLoginToken=a;var e=b.utils.cookie.get("gltexp_"+this.params.APIKey);null!=e&&(c.loginTokenExp=e);c.login_token=a}c.authMode="cookie"}delete this.params.noAuth;b.localInfo.isAndroidBrowser&&(delete this.params.login_token,delete this.params.loginTokenExp,delete this.params.authMode);return c};return d}();d.BaseRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var __extends=this.__extends||function(b,f){function p(){this.constructor=b}for(var d in f)f.hasOwnProperty(d)&&(b[d]=f[d]);p.prototype=f.prototype;b.prototype=new p};
(function(b){(function(f){(function(f){(function(d){d.callback=function(d,c){!c&&d&&(c=d.context);if(c){var a=b._.apiAdapters.web.pendingRequests[c];a&&a.handleResponse(d)}};var f=function(d){function c(){d.apply(this,arguments);this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.retry=0}__extends(c,d);c.prototype.addDefaultParams=function(){this.params.format="jsonp";this.params.callback=c.callbackName;this.params.context=this.id;var a=this.getAuthParams();this.paramsLoginToken=this.params.login_token;
b.utils.object.add(this.params,a,!0);this.sentLoginToken=this.params.login_token};c.prototype.getCacheKey=function(){return this.methodName+"_"+b.utils.keyValue.serialize(this.params)};c.prototype.send=function(a){var e=this;if(!this.inProgress){b._.apiAdapters.web.pendingRequests[this.id]=this;this.inProgress=!0;this.params.sdk="js_"+b.build.version;this.addDefaultParams();var h=b.utils.keyValue.serialize(this.params);if(!a&&this.settings.cacheTimeout)h=this.getCacheKey(),b.utils.sessionCache.get(h,
this.settings.cacheTimeout,function(a){a?(delete e.settings.cacheTimeout,b._.apiAdapters.web.callback(a,e.id)):(e.inProgress=!1,e.send(!0))});else{a=0;b.localInfo.isIE&&(a=2048);var c=this.getUrl();b.events.global.dispatch({eventName:"jsonp-beforeRequest",url:c,params:this.params,level:9});4096>=c.length+1+h.length+a&&!this.settings.forcePost?b.utils.script.load(c+"?"+h,function(){b._.apiAdapters.web.callback({context:e.id,errorCode:500026,errorMessage:"Network_error"})}):b.utils.functions.invokeOnPageLoad(function(){var a=
document.getElementById("gigyaRequestForms");null==a&&(a=document.createElement("span"),a.id="gigyaRequestForms",a.style.display="none",b.utils.DOM.appendToBody(a));var h=e.getPostContainer();a.appendChild(h)})}}};c.prototype.createParamFormElements=function(){var a=[],e="";for(e in this.params)a=a.concat(['<textarea name="',e,'">']),"object"==typeof this.params[e]?a.push(b.utils.URL.URLEncode(b.utils.JSON.serialize(this.params[e]))):a.push(this.params[e]),a.push("</textarea>");return a.join("")};
c.prototype.getPostContainer=function(){var a=this;if(!this.postContainer){var e=document.createElement("span"),h=this.ifrName+"form",c=this.id;e.innerHTML=['<form accept-charset="UTF-8" id="',h,'" method="post" action="',this.getUrl(),"?context="+this.id+"&saveResponseID="+this.id+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var d,f=b.utils.DOM.createElement("iframe",this.ifrName);
f.setAttribute("id",this.ifrName);b.utils.DOM.addEventListener(f,"load",function(){d?a.getSavedFormResponse(c):(window.setTimeout(function(){var a=document.getElementById(h);a&&a.submit()},10),d=!0)});e.appendChild(f);this.postContainer=e}return e};c.prototype.getSavedFormResponse=function(a){var b=this;(new c(a,this.baseUrl,"socialize.getSavedResponse",{APIKey:this.params.APIKey,saveResponseID:this.id,ucid:this.params.ucid,noAuth:!0},function(a){b.handleResponse(a)})).send()};c.prototype.getDataPendingTimeout=
function(a){return 4>=a?500:8>=a?1E3:21>=a?2E3:39>=a?5E3:-1};c.prototype.handleResponse=function(a){var e=this;this.settings.cacheTimeout&&b.utils.sessionCache.set(this.getCacheKey(),0==a.errorCode?a:null);null!=this.retryTimerID&&window.clearTimeout(this.retryTimerID);this.loaded=!0;this.inProgress=!1;100001==a.errorCode?(a=this.getDataPendingTimeout(this.retry++),0<a&&window.setTimeout(function(){e.send()},a)):(this.dispose(),this.callback(a))};c.prototype.dispose=function(){delete b._.apiAdapters.web.pendingRequests[this.id];
this.postContainer&&b.utils.DOM.removeElement(this.postContainer);delete this.postContainer};c.callbackName="gigya._.apiAdapters.web.callback";return c}(b._.apiAdapters.web.BaseRequest);d.JsonpRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(d){var f=function(d){function c(a,b,h,c,g,f){"undefined"===typeof f&&(f={});d.call(this,a,b,h,c,g,f);this.windowName=this.methodName.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();this.requestID=this.windowName+(new Date).getTime()}__extends(c,d);c.prototype.beforeRequest=function(){};c.prototype.afterResponse=function(a){a.dontClose&&"false"!=a.dontClose||b.utils.win.close(this.windowName);this.callback(a)};c.prototype.getAuthFlow=function(){return this.params.authFlow?
this.params.authFlow:"popup"};c.prototype.getStateString=function(){var a=b.utils.xd._flashListenerID;if(b.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=b.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()||b.localInfo.isIE&&window.navigator.msDoNotTrack)a=b.thisScript.globalConf.legacyCrossSiteMethod+":"+b.utils.xd._flashListenerID;var e=this.getAuthFlow(),a={domain:document.location.href.split("?")[0].split("#")[0],id:this.requestID,lid:a,messaging:b.localInfo.messagingMethod};
if("redirect"==e||b.localInfo.isWindowsPhone)a.sourceURL=window.top.document.location.href,this.params.redirectURL?(a.redirectURL=b.utils.URL.addParamsToURL(this.params.redirectURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)}),a.addUserInfo=!0,this.params.redirectMethod&&(a.redirectMethod=this.params.redirectMethod)):a.sourceURL=b.utils.URL.addParamsToURL(a.sourceURL,{gig_events:b.events.global.getEventsForOperation(this.methodName)});this.params.provider&&"facebook"==this.params.provider.toLowerCase()&&
(a.invite=this.params.invite);(e=b.external.backplane.getChannelId())&&(a.bp_channel_url=e);return b.utils.keyValue.serialize(a)};c.prototype.getServerParamsString=function(){var a={},e;for(e in this.params)0!=e.indexOf("x_")&&null!=this.params[e]&&(a["x_"+e]=this.params[e],delete a[e]);a.x_APIKey&&(a.client_id=a.x_APIKey,delete a.x_APIKey);a.x_oauth_token&&(a.oauth_token=a.x_oauth_token,delete a.x_oauth_token);a.redirect_uri="/GS/AfterLogin.aspx";a.response_type=this.params.authCodeOnly?"code":"server_token";
a.format="jsonp";a.x_sdk="js_"+b.build.version;(e=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=e);(e=b.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(a.x_refUID=e);a.state=this.getStateString();b.utils.object.add(a,this.getAuthParams());b._.apiAdapters.web.useAPIProxy&&b._.apiAdapters.web.gmidTicket&&(a.gmidTicket=b._.apiAdapters.web.gmidTicket);delete a.redirectURL;this.sentLoginToken=a.login_token;return b.utils.keyValue.serialize(a)};c.prototype.send=function(){var a=
this;this.beforeRequest();var e=this.getServerParamsString(),h;this.params.provider&&(h=b.socialize._getProviderByName(this.params.provider.toLowerCase()));var c=null;null!=h&&(c=(this.params.enablePopupLocation?"location=1,toolbar=1":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+h.width+",height="+h.height);var d=this.methodName.split(".");b.reports.report(this.params.originalMethodName||d[d.length-1],this.params.APIKey,this.params.cid,this.params.source,this.params.sourceData,{sn:h?
h.toString():null});e=this.getUrl()+"?"+e;"redirect"==this.getAuthFlow()?window.top.document.location.href=e:(b.utils.xd.addMessageListener(this.requestID,this.params,!0,function(b){a.afterResponse(b)}),b.utils.win.open(e,this.windowName,c))};return c}(b._.apiAdapters.web.BaseRequest);d.OauthRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(d){var f=function(d){function c(){d.apply(this,arguments)}__extends(c,d);c.prototype.send=function(a){var e=this;if(b._.apiAdapters.web.proxyState.ready){var c=function(a){(a=b.utils.JSON.deserialize(a.data))&&a.id==e.id&&(b.utils.DOM.removeEventListener(window,"message",c),e.callback(a.response))};b.utils.DOM.addEventListener(window,"message",c);b.utils.object.add(this.params,this.getAuthParams());b._.apiAdapters.web.ifrAPIProxy.contentWindow.postMessage(this.json(),
"https://cdns.gigya.com")}else b._.apiAdapters.web.proxyState.error&&this.callback({context:this.id,errorCode:500026,errorMessage:"APIProxy error: "+b._.apiAdapters.web.proxyState.error})};c.prototype.json=function(){return b.utils.JSON.serialize({id:this.id,methodName:this.methodName,params:this.params,settings:this.settings})};return c}(b._.apiAdapters.web.BaseRequest);d.APIProxyRequest=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(d){(function(d){function f(a){"undefined"===typeof a&&(a=b.thisScript.APIKey);return a?"glt_"+a:"_gig_lt"}var c={};d.activeNamespaces={};d.get=function(a){"undefined"===typeof a&&(a=b.thisScript.APIKey);return(a=b.utils.cookie.get(f(a)))?a.split("|")[0]:null};d.set=function(a,e,c,d){b.utils.localStorage.removeItem("gigyaSettings");a||(a=b.thisScript.APIKey);a?(b.utils.cookie.set("glt_"+a,e,c),b.utils.cookie.remove("gac_"+a)):b.utils.cookie.set("_gig_lt",
e,c);c||(c=7884E6);b.utils.localStorage.setItem("glt_expr_"+e,c.toString(),c)};d.getLoginTokenExpire=function(a){return b.utils.localStorage.getItem("glt_expr_"+a)};d.setFromGAC=function(a,e){if(b.thisScript.APIKey){var h=b.utils.cookie.get("gac_"+b.thisScript.APIKey);h&&!a.neverTryGAC?('"'==h.charAt(0)&&'"'==h.charAt(h.length-1)&&(h=h.substring(1,h.length-1)),c[h]?e():(c[h]=!0,b.socialize.notifyLogin({ignoreApiQueue:!0,neverTryGAC:!0,authCode:h,APIKey:b.thisScript.APIKey,client_id:b.thisScript.APIKey},
{callback:function(){b.utils.cookie.remove("gac_"+b.thisScript.APIKey);e();b.socialize.refreshUI({neverTryGAC:!0})}}))):e()}else e()};d.setFromSsoResponse=function(a,e){"undefined"===typeof e&&(e=b.thisScript.APIKey);0==a.errorCode&&(d.set(e,a.login_token,a.expires_in),b.events.global.dispatchWhenHandlerAdded({eventName:"socialize.login"},null,function(a,e){b.socialize.getUserInfo({signIDs:!0,callback:function(c){a||(a={});0==c.errorCode?(a=b._.addUserInfoToEvent(c,{eventName:"login"},!0),b.external.backplane.executeOnInit(function(){b.external.backplane.getChannelId()&&
b.socialize.notifySSOLogin({bp_channel_url:b.external.backplane.getChannelId()})})):a.cancel=!0;e(a)}})}),b.events.global.dispatchWhenHandlerAdded({eventName:"accounts.login"},null,function(a,e){b.accounts.getAccountInfo({include:"profile,data",includeUserInfo:!1,callback:function(c){a||(a={});0==c.errorCode?(a.eventName="accounts.login",b.utils.object.extractProperties(c,a,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data")):a.cancel=!0;e(a)}})}))};d.remove=function(a){"undefined"===
typeof a&&(a=b.thisScript.APIKey);b._.apiAdapters.web.sso.removeGroupToken();b.utils.cookie.remove("glt_"+a);b.utils.cookie.remove("_gig_lt")};d.migrateExisting=function(){var a=b.utils.cookie.get("_gig_lt");a&&b.thisScript.APIKey&&!d.get(b.thisScript.APIKey)&&(b.utils.cookie.remove("_gig_lt"),d.set(b.thisScript.APIKey,a))};d.getTokenParam=function(a,e){var c=b.utils.cookie.get(f(a));if(c)return c=c.split("|"),1<c.length?b.utils.keyValue.deserialize(c[1])[e]:null}})(d.tokenStore||(d.tokenStore={}))})(f.web||
(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));gigya.isGigya||(gigya.isGigya=!0);
(function(b){(function(f){(function(f){(function(d){d.newApiAdapter=function(b){return new k(b)};var f=function(){return function(){}}();d.APIProxyState=f;d.useAPIProxy;d.ifrAPIProxy;d.proxyState;d.gmidTicket;d.callbacks={};d.pendingRequests={};var k=function(){function c(a){this.name="Web"}c.prototype.init=function(a){var e=this;this.initAPIProxy(function(){b.utils.functions.createAlias("gigya.auth.loginToken.get",b._.apiAdapters.web.tokenStore.get);e.checkReturnFromURL();e.isSessionValid(void 0,
function(e){e?a():b._.apiAdapters.web.sso.getGroupToken({callback:function(e){e&&b._.apiAdapters.web.tokenStore.setFromSsoResponse(e);a()}})})})};c.prototype.initAPIProxy=function(a){var e=this;if(this.shouldBypass3pc()&&"1"!=b.utils.localStorage.getItem("_gig_3pc_enabled")){var c=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],f=b.utils.DOM.createHiddenIframe(("https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com")+"/gs/3PCTest.html#domain="+
encodeURIComponent(c)),g=function(c){(c=b.utils.keyValue.deserialize(c.data))&&"3pcTestResult"==c.id&&(b.utils.DOM.removeEventListener(window,"message",g),"true"==c.enabled?(b.utils.localStorage.setItem("_gig_3pc_enabled","1"),b.localInfo.isSafari&&b.localInfo.isIOS&&b.partnerSettings.ssoKey&&(d.useAPIProxy=!1,d.gmidTicket=null),a()):(d.useAPIProxy=!0,e.loadAPIProxy(a)),f.parentElement.removeChild(f))};b.utils.DOM.addEventListener(window,"message",g)}else d.useAPIProxy=!1,a()};c.prototype.shouldBypass3pc=
function(){var a=b.thisScript.globalConf.bypassCookiePolicy||"whenBlockedByDefault";return("whenBlockedByDefault"==a&&b.localInfo.isSafari||"always"==a)&&!window._isAPIProxy&&window.postMessage&&!b.partnerSettings.customAPIDomainPrefix};c.prototype.loadAPIProxy=function(a){var e=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2];d.gmidTicket=b.utils.localStorage.getItem("_gig_gmidt");var e="https://cdns.gigya.com/gs/APIProxy.html#apiKey="+encodeURIComponent(b.thisScript.APIKey)+
"&domain="+encodeURIComponent(e)+"&scriptUrl="+encodeURIComponent(b.thisScript.scriptElement.src)+"&hasTicket="+(d.gmidTicket?"true":"false"),c=function(e){(e=b.utils.JSON.deserialize(e.data))&&e.apiKey==b.thisScript.APIKey&&(d.proxyState=e,d.proxyState.gmidTicket&&(d.gmidTicket=d.proxyState.gmidTicket,b.utils.localStorage.setItem("_gig_gmidt",d.gmidTicket,86400)),b.utils.DOM.removeEventListener(window,"message",c),a())};b.utils.DOM.addEventListener(window,"message",c);d.ifrAPIProxy=b.utils.DOM.createHiddenIframe(e)};
c.prototype.isSessionValid=function(a,e){"undefined"===typeof a&&(a={});b._.apiAdapters.web.tokenStore.setFromGAC(a,function(){if(e){var c=null!=b._.apiAdapters.web.tokenStore.get(a.APIKey)||null!=a.oauth_token;e(c)}})};c.prototype.registerForNamespaceEvents=function(a){};c.prototype.onPluginEvent=function(a){};c.prototype.getGmidTicket=function(a){a&&a(d.useAPIProxy?d.gmidTicket:null)};c.prototype.sendRequest=function(a,e,c,f){"undefined"===typeof f&&(f={});var g=this;this.beforeRequest(a,e,f);var k=
this.getBaseUrl(a,e,f),l=f.jsSdkRequestId||this.getRequestId(k,a,e,f.disableCache);d.callbacks[l]=d.callbacks[l]||[];d.callbacks[l].push(c);if(!d.pendingRequests[l]){var n;c=function(a){g.afterResponse(n,a,function(a){g.dispatchCallbacks(l,a)})};n=d.useAPIProxy&&0!=k.indexOf("http://")?new b._.apiAdapters.web.APIProxyRequest(l,k,a,e,c,f):new b._.apiAdapters.web.JsonpRequest(l,k,a,e,c,f);n.send();b._.logoutMethods[a]&&b._.logoutBehaviour.logoutBeforeServerResponse&&this.clearSession(e)}};c.prototype.clearSession=
function(a,e){b._.apiAdapters.web.tokenStore.remove(a.APIKey);e&&e()};c.prototype.sendOauthRequest=function(a,e,c,d){var f=this;this.beforeRequest(a,e,d);var k=this.getBaseUrl(a,e,d),l=new b._.apiAdapters.web.OauthRequest("",k,a,e,function(a){f.afterResponse(l,a,function(a){c(a)})},d);l.send()};c.prototype.getBaseUrl=function(a,e,c){a=a.split(".");a=b.partnerSettings.customAPIDomainPrefix?b.partnerSettings.customAPIDomainPrefix+"."+b.partnerSettings.baseDomain:b.utils.stringUtils.format("{0}.{1}",
a[0],e.apiDomain?e.apiDomain:b.partnerSettings.plugins.apiDomain);return((b._.apiAdapters.web.tokenStore.get()||e.regToken||e.oauth_token)&&!e.noAuth||c.forceHttps||"https"==b.thisScript.protocol?"https://":"http://")+a};c.prototype.beforeRequest=function(a,e,c){"undefined"===typeof c&&(c={});(c.clearSession||c.clearSessionCondition&&c.clearSessionCondition(e))&&b._.apiAdapters.web.tokenStore.remove(e.APIKey);!b.utils.localStorage.getItem("_gig_3pc_enabled")&&b.thisScript.globalConf.enableSSOToken&&
b.localInfo.isSafari&&b.localInfo.isIOS&&b._.loginMethods[a]&&(e.includeSSOToken=!0)};c.prototype.afterResponse=function(a,b,c){var d=this;this.handleTokenResponse(a,b,function(){d.logoutSsoIfNeeded(a,b,function(){c(b)})})};c.prototype.onSDKEvent=function(a){};c.prototype.getTokenParam=function(a,e){return b._.apiAdapters.web.tokenStore.getTokenParam(a,e)};c.prototype.checkReturnFromURL=function(){var a=b.utils.URL.getParamsFromURL(document.location.href);a.gig_events&&0==a.errorCode&&null!=b._.apiAdapters.web.tokenStore.get()&&
b._.apiAdapters.web.sso.setGroupTokenFromResponse({errorCode:0,login_token:b._.apiAdapters.web.tokenStore.get(),expires_in:a.expires_in},function(){var e=a.gig_events.split(",");-1!=b.utils.array.indexOf(e,"accounts.login")?b.accounts.getAccountInfo({extraProfileFields:"samlData",include:"profile,data,userinfo",callback:function(a){var c={errorCode:0,eventName:"accounts.login"};b.utils.object.extractProperties(a,c,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");b.events.global.dispatchWhenHandlerAdded(c);
-1!=b.utils.array.indexOf(e,"socialize.login")&&(a=b._.addUserInfoToEvent(a,{errorCode:0,eventName:"socialize.login"},!0),b.events.global.dispatchWhenHandlerAdded(a))}}):b.socialize.getUserInfo({signIDs:!0,extraFields:"samlData",callback:function(a){for(var c=0;c<e.length;c++){var d=b._.addUserInfoToEvent(a,{errorCode:0,eventName:e[c]},!0);b.events.global.dispatchWhenHandlerAdded(d)}}})},b.thisScript.globalConf.legacyCrossSiteMethod)};c.prototype.setNewLoginTokenFromResponse=function(a,e,c){var d=
e.sessionInfo?e.sessionInfo.login_token:e.login_token;d?(b._.apiAdapters.web.tokenStore.set(a.params.APIKey,d,null!=e.sessionInfo?e.sessionInfo.expires_in:e.expires_in,b.thisScript.globalConf.legacyCrossSiteMethod),b._.apiAdapters.web.sso.setGroupTokenFromResponse(e,c,b.thisScript.globalConf.legacyCrossSiteMethod)):c()};c.prototype.onInvalidTokenResponse=function(a,c){a.paramsLoginToken?c():b._.apiAdapters.web.sso.getGroupToken({callback:function(d){d&&d.login_token&&d.login_token.split("|")[0]!=
a.sentLoginToken?(b._.apiAdapters.web.tokenStore.setFromSsoResponse(d,a.params.APIKey),a.send()):(b._.apiAdapters.web.tokenStore.remove(a.params.APIKey),a.settings.requiresSession()?c():(delete a.params.login_token,delete a.sentLoginToken,a.send()))}})};c.prototype.handleTokenResponse=function(a,c,f){var k=this;c=b.utils.object.clone(c);if(c.ssoToken){var g=(new Date).getTime();(new Date(g+3E5)).getTime();b.utils.localStorage.setItem("_gig_ssoToken",b.utils.JSON.serialize({ssoToken:c.ssoToken,exp:g}))}if(403030==
c.errorCode){if(this.shouldWaitForService(a,c))return}else 409012==c.errorCode&&(d.gmidTicket=null,b.utils.localStorage.removeItem("_gig_gmidt"));a.sentLoginToken&&b._.logoutMethods[a.methodName]&&0==c.errorCode&&c.logoutActiveSession&&this.clearSession(a.params);this.setNewLoginTokenFromResponse(a,c,function(){if(a.sentLoginToken&&403005==c.errorCode)k.onInvalidTokenResponse(a,f);else f()})};c.prototype.logoutSsoIfNeeded=function(a,c,d){var f=this;b.partnerSettings.ssoKey&&b._.logoutMethods[a.methodName]&&
0==c.errorCode&&c.logoutActiveSession?document.location.href!=b.partnerSettings.ssoLogoutUrl?b._.apiAdapters.web.sso.logout({callback:function(a){f.loadLogoutUrls(a.logoutURLs,d,{UID:c.UID,UIDSignature:c.UIDSignature,signatureTimestamp:c.signatureTimestamp})}}):d():d()};c.prototype.loadLogoutUrls=function(a,c,d){var f=0,g=a?a.split(","):[];a=function(){f++;f>g.length&&c()};for(var k=0;k<g.length;k++)if(g[k]){var l=b.utils.URL.addParamsToURL(g[k],d);this.loadLogoutUrl(l,a)}else a();a()};c.prototype.loadLogoutUrl=
function(a,c,d){"undefined"===typeof d&&(d=5E3);var f=document.createElement("iframe");f.src=a;f.style.position="absolute";f.style.top="-1000px";f.style.left="-1000px";var g=!1;window.setTimeout(function(){g||(g=!0,f.parentElement.removeChild(f),c())},d);f.onload=f.onreadystatechange=function(){g||f.readyState&&"complete"!=f.readyState||(g=!0,f.parentElement.removeChild(f),c())};b.utils.DOM.appendToBody(f)};c.prototype.shouldWaitForService=function(a,c){return!0==a.params.retryPossible?(a.params.retryPossible=
!1,b.external.facebook.runWhenLoaded(function(){a.send()}),!0):!1};c.prototype.dispatchCallbacks=function(a,c){var f=d.callbacks[a];if(f)for(var k=0;k<f.length;k++)if("function"==typeof f[k])f[k](b.utils.object.clone(c,!0));delete d.callbacks[a]};c.prototype.getRequestId=function(a,c,d,f){var k=-1!=navigator.userAgent.toLowerCase().indexOf("safari/534");if(f||k)a="R"+(new Date).getTime()+"_"+Math.random();else{d=b.utils.object.clone(d);for(var m in d)0!=m.indexOf("fb_")&&"source"!=m&&"sourceData"!=
m||delete d[m];a="R"+b.utils.object.getMurmurHash(a+c+b.utils.object.getHash(d))}return a};return c}();d.WebAdapter=k})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
(function(b){(function(f){(function(f){(function(d){var f=function(){function d(){this.flashStorageLoaded=!1;this.swfStorage=null;var b=document.location.href.split("#")[1];this.apiKey=decodeURIComponent(b.split("apiKey=")[1].split("&")[0]);this.originDomain=decodeURIComponent(b.split("domain=")[1].split("&")[0]);this.hasTicket="true"===decodeURIComponent(b.split("hasTicket=")[1].split("&")[0]);this.urlScheme=0==document.location.href.indexOf("https:")?"https":"http"}d.init=function(){d.instance=
new d;d.instance.init()};d.prototype.init=function(){var c=this;this.isOriginDomainValid()?this.loadIDs(function(a){a?c.postState({ready:!1,error:a}):(c.gmid&&c.ucid?c.hasTicket?c.postState({ready:!0}):c.getGmidTicketFromServer(function(a){c.postState({ready:!0,gmidTicket:a})}):c.getIDsFromServer(function(a,b,d){c.gmid=a;c.ucid=d;c.storeIDs(function(){c.postState({ready:!0,gmidTicket:b})})}),b.utils.DOM.addEventListener(window,"message",function(a){return c.onRequest(a)}))}):this.postState({ready:!1,
error:"domain_mismatch"})};d.prototype.onRequest=function(c){var a=this;c=b.utils.JSON.deserialize(c.data);var e=c.methodName,d=c.id;if(c&&e&&c.params){var f=b.utils.object.clone(c.params,!0,!0);f.gmid=this.gmid;f.ucid=this.ucid;(new b._.apiAdapters.web.JsonpRequest(d,this.getAPIBaseUrl(e),e,f,function(c){window.parent.postMessage(b.utils.JSON.serialize({id:d,response:c}),a.originDomain)},c.settings)).send()}};d.prototype.isOriginDomainValid=function(){for(var c=b.partnerSettings.baseDomains.split(","),
a=0;a<c.length;a++){var e=c[a];if(this.originDomain.indexOf(e)==this.originDomain.length-e.length)return!0}return!1};d.prototype.getIDsFromServer=function(c){var a={APIKey:this.apiKey,includeTicket:!0,ticketExpires:86400};(new b._.apiAdapters.web.JsonpRequest("idsRequest",this.getAPIBaseUrl("socialize.getIDs"),"socialize.getIDs",a,function(a){c(a.gcid,a.gmidTicket,a.ucid)})).send()};d.prototype.getGmidTicketFromServer=function(c){var a={gmid:this.gmid,APIKey:this.apiKey,expires:86400};(new b._.apiAdapters.web.JsonpRequest("gmidTicketRequest",
this.getAPIBaseUrl("socialize.getGmidTicket"),"socialize.getGmidTicket",a,function(a){c(a.gmidTicket)})).send()};d.prototype.getAPIBaseUrl=function(c){c=c.split(".");return"https://"+b.utils.stringUtils.format("{0}.{1}",c[0],b.partnerSettings.plugins.apiDomain)};d.prototype.postState=function(c){c||(c={});c.apiKey=this.apiKey;window.parent.postMessage(b.utils.JSON.serialize(c),this.originDomain)};d.prototype.loadIDs=function(b){var a=this;this.getIDsFromStorage(function(d,f,k){a.gmid=d;a.ucid=f;b(k)})};
d.prototype.getIDsFromStorage=function(c){var a=this,e,f;try{e=localStorage.getItem(d.GMID_STORAGE_KEY),f=localStorage.getItem(d.UCID_STORAGE_EKY),c(e,f)}catch(r){b.localInfo.isMobile?c(null,null,"no_supported_cookie_storage"):this.loadFlashStorageJS(function(b){if(b)var e=a.swfStorage.get(d.GMID_STORAGE_KEY),f=a.swfStorage.get(d.UCID_STORAGE_EKY);else var h="no_supported_cookie_storage";c(e,f,h)})}};d.prototype.storeIDs=function(b){var a=this;try{localStorage.setItem(d.GMID_STORAGE_KEY,this.gmid),
localStorage.setItem(d.UCID_STORAGE_EKY,this.ucid),b()}catch(e){this.loadFlashStorageJS(function(e){e&&(a.swfStorage.set(d.GMID_STORAGE_KEY,a.gmid),a.swfStorage.set(d.UCID_STORAGE_EKY,a.ucid));b()})}};d.prototype.loadFlashStorageJS=function(c){var a=this,d=function(b){a.flashStorageLoaded=!0;try{a.swfStorage?b(!0):a.swfStorage=new SwfStore({namespace:"gigIDs",swf_url:"https://cdns.gigya.com/gs/swf/swfstore.swf",onready:function(){b(!0)},onerror:function(){console&&console.log("Failed loading swfstore.swf");
b(!1)}})}catch(c){b(!1)}};this.flashStorageLoaded?d(c):b.utils.script.load("https://cdns.gigya.com/gs/js/swfstore.min.js",null,function(){d(c)})};d.GMID_STORAGE_KEY="gig_gmid";d.UCID_STORAGE_EKY="gig_ucid";return d}();d.APIProxy=f})(f.web||(f.web={}))})(f.apiAdapters||(f.apiAdapters={}))})(b._||(b._={}))})(gigya||(gigya={}));
var gigya;
(function(d){(function(c){(function(c){(function(c){c.newApiAdapter=function(b){return new e(b)};c.mobileCallbacks={};var f="is_session_valid send_request send_oauth_request get_ids on_plugin_event on_custom_event register_for_namespace_events".split(" "),e=function(){function b(a){this.adapterSettings=a;this.name="Mobile"}b.prototype.init=function(a){var b=this;this.features=this.adapterSettings&&"function"===typeof this.adapterSettings.getFeatures?d.utils.JSON.deserialize(this.adapterSettings.getFeatures()):f;
d.events.addMap({defaultMethod:function(a){b.onPluginEvent(a)},eventMap:[{events:"*",args:["$event"]}]});this.sendToMobile("get_ids",null,function(c){b.ucid=c.ucid;b.gcid=c.gcid;for(var k in d.events.global._activeNamespaces)b.registerForNamespaceEvents(k);a()})};b.prototype.getTokenParam=function(a,b){return""};b.prototype.onPluginEvent=function(a){a.isGlobal||this.sendToMobile("on_plugin_event",a)};b.prototype.onCustomEvent=function(a){this.sendToMobile("on_custom_event",a)};b.prototype.registerForNamespaceEvents=
function(a){this.sendToMobile("register_for_namespace_events",{namespace:a})};b.prototype.getGmidTicket=function(a){a&&this.sendToMobile("send_request/socialize.getGmidTicket",{expires:30},function(b){a(b.gmidTicket)},{forceHttps:!0})};b.prototype.clearSession=function(a,b){this.sendToMobile("clear_session",a,b)};b.prototype.isSessionValid=function(a,b){this.sendToMobile("is_session_valid",{},b)};b.prototype.sendRequest=function(a,b,d,c){this.sendToMobile("send_request/"+a,b,d,c)};b.prototype.sendOauthRequest=
function(a,b,d,c){this.sendToMobile("send_oauth_request/"+a,b,d,c)};b.prototype.sendToMobile=function(a,b,e,f){if(this.isActionSupported(a)){var g=document.createElement("iframe");g.style.display="none";b&&delete b.APIKey;if(e){var h=(new Date).getTime()+"_"+Math.random();c.mobileCallbacks[h]=function(a){e(a);document.documentElement.removeChild(g);delete c.mobileCallbacks[h]}}a="gsapi://"+a+"?callbackID="+(h||"")+"&params="+(b?encodeURIComponent(d.utils.keyValue.serialize(b)):"")+"&settings="+(f?
encodeURIComponent(d.utils.keyValue.serialize(f)):"");g.src=a;window.setTimeout(function(){return document.documentElement.appendChild(g)},0)}else e&&e({errorCode:400096,errorMessage:"Mobile SDK does not support feature "+a})};b.prototype.onSDKEvent=function(a){a&&a.user&&d._.convertIdentitiesArrayToObject(a.user);d.events.global.dispatch(a)};b.prototype.isActionSupported=function(a){if(!a)return!1;a=a.split("/")[0].toLowerCase();return-1<d.utils.array.indexOf(this.features,a)};return b}();c.MobileAdapter=
e})(c.mobile||(c.mobile={}))})(c.apiAdapters||(c.apiAdapters={}))})(d._||(d._={}))})(gigya||(gigya={}));
(function(d){(function(c){(function(c){(function(c){c.showPlugin=function(c,e){var b=c.split("."),a=b.splice(b.length-1,1)[0];b.length||(b=["socialize"]);"commentsUI"==c&&(b=["comments"]);a="show"+d.utils.stringUtils.capitalize(a);b.push(a);for(a=d;a&&b.length;)a=a[b.shift()];if("function"!==typeof a)return d.events.dispatchInvalidParamError(d.utils.object.merge([{plugin:c},e]),"plugin");a(e)}})(c.mobile||(c.mobile={}))})(c.apiAdapters||(c.apiAdapters={}))})(d._||(d._={}))})(gigya||(gigya={}));

// end API adapters
var gigya;
(function(a){var b=navigator.userAgent.toLowerCase(),e=new Date,h=document.location.href.split("?")[0].split("#")[0].split("/")[2].split(":")[0],g=-1!=b.indexOf("win"),c=-1!=b.indexOf("msie")||-1!=b.indexOf("mozilla")&&-1!=b.indexOf("trident"),f=-1!=b.indexOf("msie 6."),d=-1!=b.indexOf("msie 7."),k=-1!=b.indexOf("msie 8."),p=-1!=b.indexOf("msie 9."),m=-1!=b.indexOf("mozilla")&&-1!=b.indexOf("trident/7.0"),l=-1!=b.indexOf("iphone")||-1!=b.indexOf("ipad")||-1!=b.indexOf("ipod"),n;n=-1!=b.indexOf("applewebkit")&&-1!=
b.indexOf("version/")?parseInt(b.split("version/")[1].split(" ")[0]):0;var r=-1!=b.indexOf("android"),q=function(a){return-1===a.indexOf("mozilla/5.0")||-1===a.indexOf("android 4")||-1===a.indexOf("applewebkit")||-1!==a.indexOf("windows phone")?!1:(a=/chrome\/(\d+)/.exec(a))?20>parseInt(a[1]):!0}(b),s;s=-1!=b.indexOf("android")?parseFloat(b.slice(b.indexOf("android")+8)):0;a.localInfo={initTime:e,version:0,pageDomain:h,userAgent:b,isWin:g,isIE:c,isIE6:f,isIE7:d,isIE8:k,isIE9:p,isIE11:m,isIOS:l,iosVersion:n,
isAndroid:r,isAndroidBrowser:q,androidVersion:s,isChrome:-1!=b.indexOf("chrome"),isFF:-1!=b.indexOf("firefox"),isOpera:-1!=b.indexOf("opera"),isSafari:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&-1==navigator.appVersion.toLowerCase().indexOf("chrome")&&-1==b.indexOf("android"),isIOSWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),isIOSChrome:-1!=b.indexOf("crios"),isMAC:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?
!0:!1,isWindowsPhone:-1!=b.indexOf("windows phone"),supportsPostMessage:null!=window.postMessage&&(-1==b.indexOf("msie")||-1!=b.indexOf("iemobile")),supportsLocalStorage:function(){try{if(null!=window.localStorage){var a=window.localStorage.getItem("_gig_localStorage_test");window.localStorage.setItem("_gig_localStorage_test","just checking for localStorage");var d="just checking for localStorage"===window.localStorage.getItem("_gig_localStorage_test");a?window.localStorage.setItem("_gig_localStorage_test",
a):window.localStorage.removeItem("_gig_localStorage_test");return d}return!1}catch(f){return!1}}(),quirksMode:"BackCompat"==document.compatMode&&-1!=b.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var a="(iphone;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung;htc".split(";"),d;for(d in a)if(-1!=b.indexOf(a[d]))return!0;return!1}(),isMobileApp:function(){if(!document.getElementsByTagName)return!1;
for(var a=document.getElementsByTagName("meta"),d=0;d<a.length;d++)if("viewport"==a[d].getAttribute("name")){var f=a[d].getAttribute("content");if(f&&-1!==f.indexOf("width=device-width"))return!0}return!1}(),isTouch:function(){if("ontouchstart"in window)return!0;if("onmsgesturechange"in window)try{new ActiveXObject("htmlfile")}catch(a){return!0}return!1}(),messagingMethod:0}})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.indexOf=function(a,b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1};a.clone=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b};a.removeByValue=function(a,b){if(a)for(var c=a.length-1;0<=c;c--)a[c]==b&&a.splice(c,1)};a.removeByProperty=function(a,b,c){if(a)for(var f=a.length-1;0<=f;f--)a[f][b]==c&&a.splice(f,1)};a.getArrayFromString=function(a,b,c){if(!a||"string"!=typeof a)return[];c&&(a=a.toLowerCase());return(a=a.replace(/[ ]/g,"").replace(/,,/g,
","))?a.split(b):[]}})(a.array||(a.array={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));(function(a){(function(a){(function(a){a.create=function(a,b){return function(){for(var c=[],f=0;f<arguments.length-0;f++)c[f]=arguments[f+0];return b.apply(a,c)}}})(a.delegate||(a.delegate={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.fill=function(b,g){"function"==typeof b&&(b=b(g));b instanceof Array&&(b=b.join(""));var c=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;c.lastIndex=0;for(var f=b,d=c.exec(f),k;null!=d;){k="$"==d[1]?0:4;var e="!"==d[2+k],m=d[3+k];k=d[4+k];null==k&&(k="");"."==m.substring(0,1)&&(m=m.substring(1));"DBG"==m.substring(0,3)&&(m=m.substring(3));var l="";for(k=m+k;k!=l;){var l=k,n=c.lastIndex;k=a.utils.templates.fill(l,
g);c.lastIndex=n}l="";n=0;if(null!=g[m.split(".")[0]])try{l=(new Function("o","p",'return eval("o." + p)'))(g,k)}catch(r){}else l="$"+(e?"!":"")+k,n=1;f=e?f.replace(d[0],""):f.substr(0,d.index)+l+f.substr(d.index+d[0].length);c.lastIndex=d.index+n;d=c.exec(f)}return f}})(b.templates||(b.templates={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.callFunction=function(a,b){var c=eval(a),f=a.split(".");f.splice(f.length-1,1);f=eval(f.join("."));c.apply(f,b)};b.invokeOnPageLoad=function(b,g){if(!document.readyState&&document.body||"loaded"==document.readyState||"complete"==document.readyState||!g&&"interactive"==document.readyState&&document.body)b();else{var c=!1,f=function(){c||(c=!0,b())};window.setTimeout(f,2E4);a.utils.DOM.addEventListener(window,"load",f);a.utils.DOM.addEventListener(document,"DOMContentLoaded",
f)}};b.createAlias=function(a,b){for(var c=a.split("."),f=window,d=0;d<c.length-1;d++){var k=c[d];f[k]||(f[k]={});f=f[k]}f[c[c.length-1]]=b}})(b.functions||(b.functions={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){var h={};b.open=function(b,c,f){if(a.localInfo.isIE&&2048<b.length||4096<b.length)a.utils.HTTP.redirect(b.split("?")[0],[a.utils.URL.getParamsFromURL(b)],"POST","_blank");else{f||(f="menubar=0,toolbar=0,resizable=1,scrollbars=1,width=960,height=680");var d=f;try{var k=parseInt(f.split("width=")[1].split(",")[0]),e=parseInt(f.split("height=")[1].split(",")[0]),m=(screen.width-k)/2,l=(screen.height-e)/2;0>m&&(m=0);0>l&&(l=0);d+=",top="+l+",left="+m}catch(n){}(b=
window.open(b,c,d))&&b.focus&&b.focus();h[c]=b}return null!=h[c]};b.close=function(b){if(null!=h[b]){var c=function(){try{null!=h[b]&&h[b].close(),delete h[b]}catch(a){}};6<=a.localInfo.iosVersion?c():window.setTimeout(c,10)}}})(b.win||(b.win={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.isExplicitTrue=function(a){a=(""+a).toLowerCase();return"true"==a||"1"==a};a.isExplicitFalse=function(a){a=(""+a).toLowerCase();return"false"==a||"0"==a}})(a.validation||(a.validation={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){function b(a,c,f,d){d||(d=0);if(10<d)return"[Too deep]";var k="",e="",m="";if(f)for(var m="\t",e="\n",l=0;l<d+1;l++)k+=m;var n=typeof a;if("function"==n)return n.toString();if("object"!=n||null===a)return"string"==n&&(a='"'+a.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"'),String(a);var r,q,s=[],t=a&&a.constructor==Array;if(t)for(l=0;l<a.length;l++)q=a[l],n=typeof q,null==q||"undefined"==n?q="":"string"==n?q='"'+q.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,
"\\n")+'"':"function"==n?q=c?"Function":"":q.parentNode&&q.innerHTML?q="HTMLElement":q.constructor==Date?q="":"object"==n&&null!==q&&(q=b(q,c,f,d+1)),""!=String(q)&&s.push(k+m+String(q));else for(r in a)q=a[r],n=typeof q,null==q||"undefined"==n?q=String(q):"string"==n?q='"'+q.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'"':"function"==n?q=c?"Function":"":q.parentNode&&q.innerHTML?q="HTMLElement":q.constructor==Date?q="":"object"==n&&null!==q&&(q=e+b(q,c,f,d+1)),""!=String(q)&&s.push(k+
m+'"'+r.replace(/(\"|\\)/g,"\\$1").replace(/\r\n|\r|\n/g,"\\n")+'":'+String(q));return e+k+(t?"[":"{")+e+s.join(","+e)+e+k+(t?"]":"}")}a.serialize=b;a.deserialize=function(a){""===a&&(a='""');eval("var o");try{eval("o="+a)}catch(b){}return eval("o")}})(a.JSON||(a.JSON={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a,d,b){if(!d)return a;d=d.split(".");for(var c=0;c<d.length;c++){var g=d[c];b&&!a[g]&&(a[g]={});if(a[g])a=a[g];else return null}return a}function g(a,d,b,c,e,h){"undefined"===typeof c&&(c=20);"undefined"===typeof e&&(e=0);if(e>c||"undefined"==typeof a||null==a||"function"==typeof a&&b)return null;if(a.constructor==Array){for(var n=[],r=0;r<a.length;r++)b&&"function"==typeof a[r]||(n[r]=d?g(a[r],d,b,c,e+1,h):a[r]);return n}if("object"==typeof a){n=
{};for(r in a)h&&"context"==r||b&&"function"==typeof a[r]||(n[r]=d?g(a[r],d,b,c,e+1,h):a[r]);return n}return a}function c(f,d,b){if(null!=f){null==d&&(d={});if(f.constructor==Array)for(var g=0;g<f.length;g++)c(f[g],d,b);else if(b){b=b.split("|");var g={},e;for(e in f)g[e.toLowerCase()]=1;for(e=0;e<b.length;e++){var h=b[e];g[h.toLowerCase()]&&(d[h]=f[h])}}else d=a.utils.object.clone(f,!1);return d}}b.removeUndefined=function(a){var d={},b;for(b in a)null!=a[b]&&void 0!=a[b]&&(d[b]=a[b]);return d};
b.getPropertyBySerializedName=h;b.setPropertyBySerializedName=function(a,d,b){d=d.split(".");var c=d.pop();h(a,d.join("."),!0)[c]=b};b.add=function(a,d,b){for(var c in d)b&&"undefined"!=typeof a[c]||(a[c]=d[c])};b.getHash=function(f){var d=[],b;for(b in f){var c;"object"==typeof f[b]?c=a.utils.JSON.serialize(f[b],!1):f[b]&&(c=f[b].toString());d.push(b+"="+c)}return d.sort().join("&")};b.getMurmurHash=function(a,d){d||(d=0);var b,c,g,e,h;b=a.length&3;c=a.length-b;g=d;for(h=0;h<c;)e=a.charCodeAt(h)&
255|(a.charCodeAt(++h)&255)<<8|(a.charCodeAt(++h)&255)<<16|(a.charCodeAt(++h)&255)<<24,++h,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,e=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295,g^=e,g=g<<13|g>>>19,g=5*(g&65535)+((5*(g>>>16)&65535)<<16)&4294967295,g=(g&65535)+27492+(((g>>>16)+58964&65535)<<16);e=0;switch(b){case 3:e^=(a.charCodeAt(h+2)&255)<<16;case 2:e^=(a.charCodeAt(h+1)&255)<<8;case 1:e^=a.charCodeAt(h)&255,e=3432918353*(e&65535)+((3432918353*
(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,g^=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295}g^=a.length;g^=g>>>16;g=2246822507*(g&65535)+((2246822507*(g>>>16)&65535)<<16)&4294967295;g^=g>>>13;g=3266489909*(g&65535)+((3266489909*(g>>>16)&65535)<<16)&4294967295;return(g^g>>>16)>>>0};b.clone=g;b.merge=function(a){for(var d={},b=0;b<a.length;b++)if(a[b]&&a[b].length)for(var c=0;c<a[b].length;c++)for(var g in a[b][c])d[g]=a[b][c][g];else for(g in a[b])d[g]=a[b][g];return d};b.extractProperties=
c;b.extractProperty=function(a,d){return c(a,void 0,d)[d]}})(b.object||(b.object={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(g,c,f,d,k){var p=a.localInfo.pageDomain,h=a.partnerSettings.baseDomain;null==d&&(d=0<h.length&&p.length>=h.length&&p.lastIndexOf(h)==p.length-h.length?h:p);f=null==f||""===f||isNaN(f)?47304E7:0==f?null:1E3*f;h=new Date;h.setTime(h.getTime()+f);d=g+"="+escape(c)+(k?"":"; path=/")+(null==f?"":"; expires="+h.toUTCString())+(d&&""!=d&&-1!=d.indexOf(".")?"; domain="+d:"");document.cookie=d;f&&!(0<f)||b.get(g)||(d=g+"="+escape(c)+(k?"":"; path=/")+(null==
f?"":"; expires="+h.toUTCString())+(p&&""!=p&&-1!=p.indexOf(".")?"; domain="+p:""),document.cookie=d)}b.get=function(a){a=a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(a=document.cookie.match(RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)")))&&unescape(a[1])};b.set=h;b.remove=function(b){var c=a.localInfo.pageDomain,f=a.partnerSettings.baseDomain;0<f.length&&c.length>=f.length&&c.lastIndexOf(f)==c.length-f.length&&(h(b,"",-1,f),h(b,"",-1,f,!0));h(b,"",-1,a.localInfo.pageDomain);
h(b,"",-1,a.localInfo.pageDomain,!0);h(b,"",-1,"");h(b,"",-1,"",!0)}})(b.cookie||(b.cookie={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.sanitizeHTML=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")};a.sanitizeAttribute=function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}})(a.sanitize||(a.sanitize={}))})(a.utils||(a.utils={}))})(gigya||
(gigya={}));
(function(a){(function(a){(function(a){function b(){var a=0,f=0;"number"==typeof window.pageYOffset?(f=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(f=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(f=document.documentElement.scrollTop,a=document.documentElement.scrollLeft);return{left:a,top:f}}function g(){var a,b;b=document.documentElement;var d=
document.body;window.innerHeight?(a=window.innerHeight,b=window.innerWidth):(a=b.clientHeight,0==a&&(a=d.clientHeight),b=b.clientWidth,0==b&&(b=d.clientWidth));return{w:b,h:a}}a.getScroll=b;a.getFullSize=function(){var a=document.documentElement,b=document.body,d=a.clientHeight;0==d&&(d=b.clientHeight);a=a.clientWidth;0==a&&(a=b.clientWidth);return{w:a,h:d}};a.getInnerSize=g;a.getMiddleCenter=function(){var a=b(),f=g();return{top:a.top+Math.floor(f.h/2),left:a.left+Math.floor(f.w/2)}};a.isRectHorizontallyVisible=
function(a){var f=b(),d=g();return a.left>=f.left&&a.right<=f.left+d.w};a.isRectFullyVisible=function(a){var f=b(),d=g();return a.top>=f.top&&a.bottom<=f.top+d.h&&a.left>=f.left&&a.right<=f.left+d.w}})(a.viewport||(a.viewport={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.getPosition=function(){var a=0,b=0;if(document.body){var c=null,c={clientX:0,clientY:0};if(c.pageX||c.pageY)a=c.pageX,b=c.pageY;else if(c.clientX||c.clientY)a=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=c.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:b}}}})(a.mouse||(a.mouse={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.URLEncode=function(a){return encodeURIComponent(a)};b.URLDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};b.getParamsFromURL=function(b,g){return-1==b.indexOf("?")?{}:a.utils.keyValue.deserialize(b.split("#")[0].split("?")[1],"&",g)};b.getParamValueFromURL=function(a,b,c){if(null==b||""==b)return c;var f=b.indexOf("?");if(-1==f)return c;f="&"+b.substr(f+1);b=f.toLowerCase().indexOf("&"+a.toLowerCase()+"=");if(-1==b)return c;a=f.substr(b+
(1+a.length+1))+"&";b=a.indexOf("&");return a.substr(0,b)};b.addParamsToURL=function(b,g){var c=a.utils.URL.getParamsFromURL(b);a.utils.object.add(c,g);var f=b.split("#"),c=f[0].split("?")[0]+"?"+a.utils.keyValue.serialize(c,"&");1<f.length&&(c+="#"+f[1]);return c}})(b.URL||(b.URL={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.serialize=function(b,g){var c=[];g||(g="&");for(var f in b)switch(typeof b[f]){case "function":break;case "array":case "object":null!=b[f]&&c.push(f+"="+a.utils.URL.URLEncode(a.utils.JSON.serialize(b[f])));break;case "undefined":break;default:c.push(f+"="+a.utils.URL.URLEncode(b[f]))}return c.join(g)};b.deserialize=function(b,g,c,f){var d={};if(!b)return d;g||(g="&");b=b.split(g);for(g=0;g<b.length;g++){var k=b[g],e=k.indexOf("=");if(-1==e){var m=c?k.toLowerCase():
k;d[m]="1"}else{m=k.substr(0,e);c&&(m=m.toLowerCase());k=k.substr(e+1).replace(/\+/g," ");try{d[m]=f?unescape(k):a.utils.URL.URLDecode(k)}catch(l){d[m]=unescape(k)}}}return d}})(b.keyValue||(b.keyValue={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a,b,d){"undefined"!==typeof d&&(d=(new Date).getTime()+1E3*d,b=b+"|exp="+d);g(a,b)}var g=function(a,b){},c=function(a){return null},f=function(a){};if(a.localInfo.supportsLocalStorage)g=function(a,b){try{window.localStorage[a]=b}catch(d){}},c=function(a){return window.localStorage[a]},f=function(a){window.localStorage.removeItem(a)};else if(a.localInfo.isIE6||a.localInfo.isIE7)var d,k=function(){d||(d=document.createElement("div"),d.addBehavior("#default#userData"),
a.utils.DOM.appendToBody(d))},p=function(){try{k(),d.save("gigya_ud")}catch(a){}},m=function(){try{k(),d.load("gigya_ud")}catch(a){}},g=function(a,b){m();d.setAttribute(encodeURIComponent(a).replace(/\%/g,""),b);p()},c=function(a){m();return d.getAttribute(encodeURIComponent(a).replace(/\%/g,""))},f=function(a){m();d.removeAttribute(encodeURIComponent(a).replace(/\%/g,""));p()};else if(a.localInfo.isFF&&window.globalStorage)var l=window.globalStorage,g=function(a,b){try{l[location.hostname][a]=b}catch(d){}},
c=function(a){return l[location.hostname][a]},f=function(a){delete l[location.hostname][a]};b.getItem=function(a){var b=c(a);if(b&&b.split){var d=b.split("|exp=");if(1<d.length){var g=parseInt(d[1]);if((new Date).getTime()<g)return d[0];f(a)}}return b};b.setItem=h;b.removeItem=function(a){f(a)};b.setObject=function(b,d){h(b,a.utils.JSON.serialize(d))};b.getObject=function(b){b=this.getItem(b);try{b=a.utils.JSON.deserialize(b)}catch(d){}return b}})(b.localStorage||(b.localStorage={}))})(a.utils||(a.utils=
{}))})(gigya||(gigya={}));
(function(a){(function(b){(function(e){e._nextZIndex=999999999;e._popupContainers=[];e._pseudoContainers=[];var h=null;e.addEventListener=function(a,b,f){a&&f&&(a.addEventListener?a.addEventListener(b,f,!0):a.attachEvent("on"+b,f))};e.removeEventListener=function(a,b,f){f&&(a.removeEventListener?a.removeEventListener(b,f,!0):a.detachEvent("on"+b,f))};e.disableDefaultEventHandling=function(a){a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)};e.addDialogBackListener=function(b){a.utils.DOM._removeDialogBackListener();
h=function(c){c&&c.newURL&&-1==c.newURL.indexOf("|gigyaMobileDialog")&&(b(c),a.utils.DOM._removeDialogBackListener())};window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&(window.location.hash+="|gigyaMobileDialog");a.utils.DOM.addEventListener(window,"hashchange",h)},50)};e._removeDialogBackListener=function(){h&&(a.utils.DOM.removeEventListener(window,"hashchange",h),h=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))};e.appendToBody=
function(a){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a))};e.removeElement=function(a){a&&a.parentElement&&a.parentElement.removeChild(a)};e.isChildOf=function(a,b){for(var f=a.parentNode;f;){if(b==f)return!0;f=f.parentNode}return!1};e.isVisible=function(b){if(!b||!b.parentNode||b.style&&"none"==b.style.display)return!1;if(b.parentNode)return a.utils.DOM.isVisible(b.parentNode)};e.getCenteredDivID=
function(b){return"gig_"+a.localInfo.initTime.getTime().toString()+"_"+b};e.createTopLevelDiv=function(b){var c;c=document.createElement("iframe");c.id="gigya_ifr_"+b;c.frameborder="0";c.frameBorder="0";c.allowtransparency=!0;c.style.position="absolute";c.style.width=a.localInfo.isChrome?"30px":"1px";c.style.height="1px";null!=c.style.zIndex&&(c.style.zIndex=a.utils.DOM._nextZIndex++);a.localInfo.isIE6&&(c.src=a._.getCdnResource("/gs/blank.htm"));var f=document.createElement("div");f.style.position=
"absolute";null!=f.style.zIndex&&(f.style.zIndex=""+a.utils.DOM._nextZIndex++);f.innerHTML="";b&&(f.id=b);document.body&&document.body.insertBefore&&(document.body.firstChild?(null!=c&&document.body.insertBefore(c,document.body.firstChild),document.body.insertBefore(f,document.body.firstChild)):document.body.appendChild&&(null!=c&&document.body.appendChild(c),document.body.appendChild(f)));return f};e.hideByID=function(a){if(a=document.getElementById(a))a.style.display="none"};e.showByID=function(b){if(b=
document.getElementById(b))b.style.display=a.localInfo.isIE6?"TD"==b.tagName?"table-cell":"TR"==b.tagName?"":"TABLE"==b.tagName?"":"block":""};e.clearByID=function(a){try{var b=document.getElementById(a);null!=b&&(b.innerHTML="")}catch(f){}};e.getHTMLSize=function(a,b){var f=document.createElement("div");f.style.position="absolute";f.style.left="-1000px";f.innerHTML=a;b.appendChild(f);var d=f.offsetWidth,k=f.offsetHeight;f.parentNode.removeChild(f);return{w:d,h:k}};e.getElementsByClass=function(a,
b){if(!a)return[];for(var f=[],d=a.getElementsByTagName("*"),k=0;k<d.length;k++){var e=d[k].className;if(e)for(var e=e.split(" "),m=0;m<e.length;m++)e[m]==b&&f.push(d[k])}return f||[]};e.getElementsByAttribute=function(a,b,f,d){var e=[];a=a.getElementsByTagName(b);for(b=0;b<a.length;b++)a[b].getAttribute(f)==d&&e.push(a[b]);return e};e.getElementPosition=function(b){if(!b)return{left:0,top:0,bottom:0,right:0};b=b.getBoundingClientRect();var c=a.utils.viewport.getScroll(),f=b.left+c.left,c=b.top+c.top;
return{left:f,top:c,right:f+b.width,bottom:c+b.height}};e.addClassToElement=function(a,b){if(a){for(var f=!1,d=a.className.split(" "),e=0;e<d.length;e++)if(d[e]==b){f=!0;break}f||(d.push(b),a.className=d.join(" "))}};e.removeClassFromElement=function(a,b,f){"undefined"===typeof f&&(f=!1);if(a){for(var d=a.className.split(" "),e=d.length-1;0<=e;e--)(d[e]==b||f&&-1!=d[e].indexOf(b))&&d.splice(e,1);a.className=d.join(" ")}};e.isElementClass=function(a,b){if(a){for(var f=!1,d=a.className.split(" "),e=
0;e<d.length;e++)if(d[e]==b){f=!0;break}return f}};e.cancelEvent=function(a){a&&("cancelable"in a?a.preventDefault():a.returnValue=!1)};e.createElement=function(a,b){var f=document.createElement("div");b=b||"";f.innerHTML="<"+a+' name="'+b+'" id="'+b+'"></'+a+">";return f.firstChild};e.setSize=function(e,c,f,d){if(null!=e&&null!=e.style){var k=""+(0<(""+c).indexOf("%")?c:c+"px"),p=""+(0<(""+c).indexOf("%")?f:f+"px");if(e.style.width!=k||e.style.height!=p)void 0==c||isNaN(c)||(e.style.width=k),void 0==
f||isNaN(f)||(e.style.height=p);if(d&&c&&f){if(null==e.style.zIndex||d)e.style.zIndex=(this._nextZIndex++).toString();d=b.viewport.getInnerSize();k=a.utils.viewport.getScroll();p=k.left;e.style.top=""+Math.max(0,k.top+Math.floor((d.h-f)/2))+"px";e.style.left=""+Math.max(0,p+Math.floor((d.w-c)/2))+"px";e.style.visibility=""}}};e.createHiddenIframe=function(b){var c=document.createElement("iframe");c.src=b;c.style.width="30px";c.style.height="10px";c.style.position="absolute";c.style.top="-1000px";
c.style.left="-1000px";document.body?a.utils.DOM.appendToBody(c):a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(c)});return c};e.attributeEncode=function(a){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}})(b.DOM||(b.DOM={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(b){b=a.utils.object.clone(b);var d=function(){var d=b.data.split("="),e=f[d[0]];if(null!=e){if("function"==typeof e.callback){var k=unescape(d[1]),k=a.utils.keyValue.deserialize(k,null,null,!0);e.callback(k,e.context)}c(d[0]);(d=document.getElementById(d[0]))&&d.parentElement&&d.parentElement.removeChild(d)}};b&&b.data&&b.data.split&&(6<=a.localInfo.iosVersion?d():window.setTimeout(d,100))}function g(b){var d=document.createElement("iframe");d.style.width=
"30px";d.style.height="10px";d.style.position="absolute";d.style.top="-1000px";d.style.left="-1000px";d.id=b;d.src="https://cdns.gigya.com/gs/LocalStorageListener.htm?mode=receive&id="+encodeURIComponent(b);a.utils.DOM.appendToBody(d);return d}function c(a){delete f[a]}var f={};b._flashListenerID="flid"+(new Date).getTime();var d=!1,k={};b._onFlashMessage=function(b){b=a.utils.keyValue.deserialize(b,null,null,!0);var d=b.id,e=f[d];null!=e&&("function"==typeof e.callback&&e.callback(b,e.context),c(d))};
b.addMessageListener=function(c,m,l,n){f[c]={callback:n,context:m,t:(new Date).getTime()};m=a.localInfo.messagingMethod;if(0==m||1==m)0==m&&l&&g(c),d||(c=function(a){var b=a.data.split("=")[0];f[b]&&h(a)},window.addEventListener?window.addEventListener("message",c,!1):window.attachEvent&&window.attachEvent("onmessage",c),d=!0);else{var r="localstorage";a.thisScript.globalConf.legacyCrossSiteMethod&&"localstorage"!=a.thisScript.globalConf.legacyCrossSiteMethod.toLowerCase()&&(r=a.thisScript.globalConf.legacyCrossSiteMethod);
k[r]||window.setTimeout(function(){var d=document.createElement("div");d.style.width="1px";d.style.height="1px";d.style.overflow="hidden";d.style.position="absolute";d.style.left="-1000px";var f=b._flashListenerID;"localstorage"!=r&&(f=r+":"+b._flashListenerID);var c=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],g=(new Date).getTime(),p=document.createElement("object");p.setAttribute("id","eventsBroadcaster"+g);p.setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0");
p.setAttribute("width","50");p.setAttribute("height","50");p.setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");p.setAttribute("data","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");g=document.createElement("param");g.name="movie";g.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");p.appendChild(g);g=document.createElement("param");g.setAttribute("name","allowScriptAccess");g.setAttribute("value","always");p.appendChild(g);g=document.createElement("param");
g.setAttribute("name","FlashVars");g.setAttribute("value","action=listen&id="+f+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+c);p.appendChild(g);d.appendChild(p);a.utils.functions.invokeOnPageLoad(function(){a.utils.DOM.appendToBody(d);p.setAttribute("type","application/x-shockwave-flash");p.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});k[r]=!0},500)}};b.removeMessageListener=c})(b.xd||(b.xd={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(e){function h(b,c,e,g){var h;if(g){g=b.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//,"http$1://cdn$2.gigya.com/");if(f[g]){f[g].loaded?e&&e():(f[g].onLoad.push(e),f[g].onError.push(c));return}h=f[g]={loaded:!1,onLoad:[e],onError:[c]}}else h={loaded:!1,onLoad:[e],onError:[c]};c=function(){var c=document.createElement("script");c.async=!0;c.type="text/javascript";c.charset="UTF-8";var e=!1,k=function(){if(!e){if(h.onLoad&&h.onLoad.length)for(var a=0;a<h.onLoad.length;a++)if("function"==
typeof h.onLoad[a])h.onLoad[a]();h.loaded=!0;h.onError=h.onLoad=null;e=!0;setTimeout(function(){c.parentNode&&c.parentNode.removeChild(c)},5E3)}};c.onload=k;c.onreadystatechange=function(){"loaded"==this.readyState&&k()};c.onerror=function(){for(var a=0;a<h.onError.length;a++)if("function"==typeof h.onError[a])h.onError[a]();delete f[b]};var g=document.getElementsByTagName("head");g&&0<g.length&&g[0].appendChild(c);g=function(){c.src=b};6<=a.localInfo.iosVersion?g():setTimeout(g,1)};a.localInfo.isIE?
a.utils.functions.invokeOnPageLoad(c):c()}function g(a,b){var f=new Image,c=!1;f.onload=f.onerror=function(){c||(c=!0,b())};f.src=a}function c(d,f){var c=document.createElement("iframe");c.style.width="30px";c.style.height="10px";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";var e=function(a){var b;b=a&&a.srcElement?a.srcElement:a&&a.target?a.target:this;!b.loaded&&b.parentNode&&(b.loaded=!0,f(),window.setTimeout(function(){try{document.body.removeChild(b)}catch(a){}},5E3))};
b.DOM.addEventListener(c,"load",e);b.DOM.addEventListener(c,"error",e);c.onload=c.onreadystatechange=function(a){c.readyState&&"loaded"!=c.readyState&&"complete"!=c.readyState||e(a)};c.onerror=e;c.src=d;a.utils.DOM.appendToBody(c)}var f={};e.load=h;(function(a){a[a.script=0]="script";a[a.image=1]="image";a[a.iframe=2]="iframe"})(e.ResourceTypes||(e.ResourceTypes={}));e.triggerResource=function(a,b,f){"undefined"===typeof f&&(f=1);switch(f){case 0:h(a,b,b,!1);break;case 1:g(a,b);break;case 2:c(a,b);
break;default:throw Error("Unsupported resource type");}}})(b.script||(b.script={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.set=function(b,e){if(window.sessionStorage){var c;try{(c=a.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(c={}),null==e&&c[b]?delete c[b]:c[b]={response:e,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",a.utils.JSON.serialize(c))}catch(f){}a.utils.queue.release("cache","cache_"+b)}};b.get=function(b,e,c){if(window.sessionStorage)try{if(!a.utils.queue.isActive("cache_"+b)){var f=window.sessionStorage.getItem("gigyaCache"),
d=a.utils.JSON.deserialize(f),k=d?d[b]:null;if(k){if(e&&e+k.time>(new Date).getTime()){c(k.response);return}a.utils.sessionCache.remove(b);k=null}if(!k){a.utils.queue.hold("cache","cache_"+b);c(null);return}}a.utils.queue.isActive("cache_"+b)&&a.utils.queue.waitFor("cache_"+b,a.utils.sessionCache.get,arguments)}catch(p){c(null)}else"function"==typeof c&&c(null)};b.remove=function(b){a.utils.sessionCache.set(b,null)}})(b.sessionCache||(b.sessionCache={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){var h=navigator.userAgent.toLowerCase(),g=null;b.isModern=function(){return a.localInfo.isChrome||a.localInfo.isFF||a.localInfo.isOpera||a.localInfo.isIOSWebView||a.localInfo.isIE&&9<=a.utils.browser.getVersion()||a.localInfo.isSafari&&4<=a.utils.browser.getVersion()};b.getVersion=function(){if(g)return g;try{var a=h.match(/(opera|chrome|safari|firefox|msie|trident.*rv:)\/?\s*(\.?\d+(\.\d+)*)/i);if(a[2]){var b=a[2].split(".")[0];if(!isNaN(parseInt(b)))return g=
parseInt(b)}}catch(d){}return 0}})(b.browser||(b.browser={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.trim=function(a){return a.replace(/^\s*(\S*(.*\S)?)\s*$/,"$1")};a.format=function(a){for(var b=0;b<arguments.length-1;b++);for(b=0;b<arguments.length-1;b++)null!=arguments[b+1]&&(a=a.split("{"+b+"}").join(arguments[b+1]));return a};a.capitalize=function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}})(a.stringUtils||(a.stringUtils={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(a){if(!g[a])return!1;for(var b in g[a].ids)return!0;return!1}var g={};b._servicesStatus=function(){var a={},b;for(b in g)h(b)?a[b]={active:!0,waitingFor:g[b].ids,queuedCount:g[b].q.length}:a[b]={active:!1};return a};b.isActive=h;b.release=function(a,b){if(g[b]&&(delete g[b].ids[a],!h(b))){var d=g[b].q;for(g[b].q=[];0<d.length;){var e=d.splice(0,1)[0];try{e.func.apply(this,e.args)}catch(p){console&&console.log("Gigya: Exception while invoking queued method ("+
b+": "+a+")")}if(h(b)){g[b].q=d;break}}}};b.hold=function(a,b){g[b]||(g[b]={q:[],ids:{}});g[b].ids[a]=!0};b.waitFor=function(a,b,d){g[a]||(g[a]={q:[],ids:{}});g[a].q.push({func:b,args:d})};b.queueForExecution=function(b,f,d){d=d||[];a.utils.queue.isActive(b)?a.utils.queue.waitFor(b,f,d):f.apply(this,d)}})(b.queue||(b.queue={}))})(a.utils||(a.utils={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.redirect=function(b,e,c,f){if(c&&"post"==c.toLowerCase()){c=document.createElement("form");var d=[];c.setAttribute("accept-charset","UTF-8");c.setAttribute("method","POST");c.setAttribute("action",b);f&&c.setAttribute("target",f);b=a.utils.object.merge(e);for(var k in b)"boolean"!=typeof b[k]&&"string"!=typeof b[k]||"eventName"==k||d.push('<textarea name="'+encodeURIComponent(k)+'">'+b[k].toString().replace(/\&/g,"&amp;")+"</textarea>");c.innerHTML=d.join("");
c.style.display="none";a.utils.DOM.appendToBody(c);c.submit()}else{c=b.split("?");b=c[0];f={};if(1<c.length)for(c=c[1].split("&"),d=0;d<c.length;d++){var p=c[d].split("=");f[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}for(c=0;c<e.length;c++)for(k in d=e[c],d)"boolean"!=typeof d[k]&&"string"!=typeof d[k]||"eventName"==k||(f[k]=d[k]);e=[];for(k in f)e.push(k+"="+encodeURIComponent(f[k]));document.location.href=b+"?"+e.join("&")}}})(b.HTTP||(b.HTTP={}))})(a.utils||(a.utils={}))})(gigya||(gigya=
{}));
(function(a){(function(a){a[a.OK=0]="OK";a[a.Data_Pending=100001]="Data_Pending";a[a.Accounts_Linked=200009]="Accounts_Linked";a[a.OK_With_Error_Login_Identifier_Exists=200010]="OK_With_Error_Login_Identifier_Exists";a[a.Account_Pending_Registration=206001]="Account_Pending_Registration";a[a.Account_Pending_Verification=206002]="Account_Pending_Verification";a[a.Account_Missing_LoginID=206003]="Account_Missing_LoginID";a[a.After_Email_Verification=206005]="After_Email_Verification";a[a.Client_Log=300001]=
"Client_Log";a[a.Missing_required_parameter=400002]="Missing_required_parameter";a[a.Unique_identifier_exists=400003]="Unique_identifier_exists";a[a.Invalid_parameter_value=400006]="Invalid_parameter_value";a[a.Validation_error=400009]="Validation_error";a[a.Required_value_validation_error=400027]="Required_value_validation_error";a[a.Not_supported=400096]="Not_supported";a[a.Unauthorized_user=403005]="Unauthorized_user";a[a.Session_expired_retry=403030]="Session_expired_retry";a[a.Account_Disabled=
403041]="Account_Disabled";a[a.Invalid_LoginID=403042]="Invalid_LoginID";a[a.Login_identifier_exists=403043]="Login_identifier_exists";a[a.Underage_user=403044]="Underage_user";a[a.loginID_does_not_exist=403047]="loginID_does_not_exist";a[a.Pending_Password_Change=403100]="Pending_Password_Change";a[a.Account_Pending_TFA_Verification=403101]="Account_Pending_TFA_Verification";a[a.Account_Pending_TFA_Registration=403102]="Account_Pending_TFA_Registration";a[a.Account_Pending_Recent_Login=403110]="Account_Pending_Recent_Login";
a[a.Account_Temporarily_Locked_Out=403120]="Account_Temporarily_Locked_Out";a[a.Resource_not_found=404004]="Resource_not_found";a[a.Profile_photo_too_large=413004]="Profile_photo_too_large";a[a.Invalid_gmid_Ticket=409012]="Invalid_gmid_Ticket";a[a.Network_error=500026]="Network_error"})(a.GSErrors||(a.GSErrors={}));(function(a){a[a.None=0]="None";a[a.Same_password=100001]="Same_password";a[a.Invalid_password=100002]="Invalid_password"})(a.GSErrorDetails||(a.GSErrorDetails={}))})(gigya||(gigya={}));
(function(a){a.socialize={};a.gcs={};a.gm={};a.comments={};a.accounts={};a.chat={};a.gscounters={}})(gigya||(gigya={}));
(function(a){(function(b){var e={},h=0,g={http:["cdn.gigya.com","cdn1.gigya.com","cdn2.gigya.com","cdn3.gigya.com"],https:["cdns.gigya.com","cdns1.gigya.com","cdns2.gigya.com","cdns3.gigya.com"]};b.getApi=function(a){return e[a]};b.getCdnResource=function(b){var d,c="https:"===document.location.protocol?"https":"http";"cdn.gigya.com"==a.thisScript.base||"cdns.gigya.com"==a.thisScript.base?d=a.thisScript.base:(d=g[c],h>=d.length&&(h=0),d=d[h++]);return c+"://"+d+(b?b:"")};var c=function(){function b(a,
f){this.methodName=a;this.settings=f;this.addAlias();e[a]=this}b.prototype.run=function(a){};b.prototype.preprocessRequest=function(a,b){this.settings.preprocessor?this.settings.preprocessor(a,b):b()};b.prototype.addAlias=function(){var b=this;a.utils.functions.createAlias("gigya."+this.methodName,function(){var f=function(){var f=a.utils.object.merge([a.thisScript.globalConf,c]);b.run(f)},c=a.utils.object.merge([arguments]);a.thisScript&&a.thisScript.globalConf?f():a.utils.queue.queueForExecution("API",
f)})};return b}();b.BaseApi=c})(a._||(a._={}))})(gigya||(gigya={}));(function(a){a.defaultEventMaps=a.defaultEventMaps||[]})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(b,d,c,e){var g=function(b){var f=0;b.cancel||(f=a.events.global.dispatch(b,d));e&&e(f)};c?c(b,g):g(b)}var g={},c={};b._activeNamespaces={};b.add=function(b,d,e,p,m,l){m||(m="socialize");b=m+"_"+b;e||(e="other");g[b]||(g[b]=[]);g[b].push({handler:d,type:e,context:p,params:l});!this._activeNamespaces[m]&&a._.apiAdapter&&a._.apiAdapter.registerForNamespaceEvents(m);this._activeNamespaces[m]=1;if((d=c[b])&&"other"==e)for(c[b]=[],e=0;e<d.length;e++)p=d[e],
h(p.eventObj,p.params,p.preProcess)};b.remove=function(a,b){};b.dispatch=function(b,d){var c=0,e=b.isInternal,h=b.eventName.split(",");a.log.addLog('Dispatching global event "'+b.eventName+'" with this event object',b);for(var l=0;l<h.length;l++){var n=h[l].split("."),r=1<n.length?n.shift():"socialize",q=n[0],n="on"+q.substring(0,1).toUpperCase()+q.substring(1),s=a.utils.object.clone(g[r+"_"+n]);s||(s=[]);n=a.utils.object.clone(b);n.isGlobal=!0;n.eventName=q;d&&d.source&&(n.source=d.source);d&&d.sourceData&&
(n.sourceData=d.sourceData);q=["component"];e||q.push("other");for(var t=0;t<q.length;t++)for(var w=q[t],x=0;x<s.length;x++){var v=s[x];if(v.type==w){var u=a.utils.object.clone(n);null==u.context&&null!=v.context&&(u.context=v.context);null==u.context&&delete u.context;"component"!=w&&(c++,a._.handleSpecialFields(u));v.params&&v.params.signKey&&(u.UIDSignature=b.signKeysUIDSignature[v.params.signKey],delete u.signKeysUIDSignature);try{v.handler(u)}catch(y){a.log.addLog('Error while trying to invoke "'+
b.eventName+'" global event handler',y)}}}e||a.events._dispatchFromMaps(n,!0);s=window.GenesisExchange_Gigya;q=window.gigya_omniture_conf;t=window.myOmnitureIntegrationFunc;e||"undefined"==typeof s||"undefined"==typeof q||"socialize"!=r||((new s(q)).processAction(n),"undefined"!=typeof t&&t(q,n))}return c};b.dispatchWhenHandlerAdded=function(a,b,e){"undefined"===typeof b&&(b={});var g=a.eventName.split("."),m=1<g.length?g.shift():"socialize",l=g[0];h(a,b,e,function(g){0==g&&(g="on"+l.substring(0,
1).toUpperCase()+l.substring(1),g=m+"_"+g,c[g]||(c[g]=[]),c[g].push({eventObj:a,params:b,preProcess:e}))})};b.getEventsForOperation=function(a){var b=[];-1!=a.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&b.push("socialize.login"),this._activeNamespaces.accounts&&b.push("accounts.login")):-1!=a.toLowerCase().indexOf("addconnection")&&this._activeNamespaces.socialize&&b.push("socialize.connectionAdded");return b.join(",")}})(b.global||(b.global={}));b.addMap=function(b){a.defaultEventMaps.splice(0,
0,b)};b.dispatchErrorFromResponse=function(b,h,g){h||(h={});var c=h;c.response&&(c=c.response);h={eventName:"error",status:c.status?c.status:"FAIL",statusMessage:c.statusMessage?c.statusMessage:"General Server Error",errorMessage:c.errorMessage?c.errorMessage:"General Server Error",errorDetails:c.errorDetails?c.errorDetails:"",errorCode:c.errorCode?c.errorCode:500001,response:h};a.utils.object.add(h,g);a.events.dispatchForWidget(h,b)};b.dispatchInvalidParamError=function(a,b){var g={eventName:"error"};
"undefined"==typeof a[b]||null==a[b]?(g.errorCode=400002,g.errorMessage="Missing_required_parameter ("+b+")"):(g.errorCode=400006,g.errorMessage="Invalid_parameter_value ("+b+")");g.status=g.errorCode;g.statusMessage=g.errorMessage;this.dispatchForWidget(g,a)};b.dispatchForWidget=function(b,h){if(b&&b.eventName){var g=b.eventName;a.log.addLog('Dispatching widget event "'+g+'" for '+h.lastSource+" with this event object",b);var c="on"+g.substring(0,1).toUpperCase()+g.substring(1);a._.handleSpecialFields(b);
for(var f=b.eventName.split(","),d,k=0;k<f.length;k++){g=f[k];c="on"+g.substring(0,1).toUpperCase()+g.substring(1);h.context&&(b.context=h.context);h&&h.source&&(b.source=h.source);h&&h.sourceData&&(b.sourceData=h.sourceData);h&&h.containerID&&(b.sourceContainerID=h.containerID);try{"function"==typeof h[c]&&(d=h[c](b))}catch(p){}if(-1==g.indexOf("login")&&-1==g.indexOf("logout")&&"connectionRemoved"!=g&&"connectionAdded"!=g){this._dispatchFromMaps(b);var g=window.GenesisExchange_Gigya,c=window.gigya_omniture_conf,
m=window.myOmnitureIntegrationFunc;"undefined"!=typeof g&&"undefined"!=typeof c&&((new g(c)).processAction(b),"undefined"!=typeof m&&m(c,b))}}if(null!=d)return d}};b._dispatchFromMaps=function(b,h){for(var g=[],c=!1,f=0;f<a.defaultEventMaps.length;f++){for(var d=a.defaultEventMaps[f].eventMap,k=a.defaultEventMaps[f].defaultMethod,p=0;p<d.length;p++){var m=d[p],l=[];m.args||(m.args=[]);for(var n=0;n<m.args.length;n++)"$event"==m.args[n]?l.push(b):l.push(a.utils.templates.fill(m.args[n],b));m.events.split(",");
n=","+m.events.toLowerCase()+",";-1==n.indexOf(",*,")&&(-1==n.indexOf(",on"+b.eventName.toLowerCase()+",")&&-1==n.indexOf(","+b.eventName.toLowerCase()+",")||(b.source||m.sources)&&m.sources&&-1==m.sources.indexOf(b.source))||(g.push(m),(m.method?m.method:k).apply(this,l),m.override&&(c=!0))}if(c)break}}})(a.events||(a.events={}))})(gigya||(gigya={}));
var __extends=this.__extends||function(a,b){function e(){this.constructor=a}for(var h in b)b.hasOwnProperty(h)&&(a[h]=b[h]);e.prototype=b.prototype;a.prototype=new e};
(function(a){(function(b){b.apiAdapter;var e=function(e){function g(a,b,d,g,p,m){"undefined"===typeof g&&(g={});"undefined"===typeof p&&(p={});e.call(this,a,g);this.schema=b;this.requiresSession=d;this.settings=g;this.adapterSettings=p;this.altSessionParams=m;"undefined"===typeof p.requiresSession&&(p.requiresSession=function(){return d})}__extends(g,e);g.prototype.run=function(c){var f=this,d=function(){e.prototype.run.call(f,c);(new b.ServerApiRequest(f,c)).start()};c.ignoreApiQueue?d():a.utils.queue.queueForExecution("API",
function(){d()})};return g}(b.BaseApi);b.ServerApi=e})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function e(a){return{status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:"",originalResponse:a}}var h;a.events.global.add("onFBCRefreshed",function(){h=!1},"component");var g;(function(a){a[a._unknown=0]="_unknown";a[a.facebook=1]="facebook";a[a.yahoo=2]="yahoo";a[a.google=3]="google";a[a.linkedin=4]="linkedin";a[a.samlProvider=5]="samlProvider";a[a.samlSession=6]="samlSession"})(g||(g={}));var c=function(){function f(b,f){this.api=
b;this.params=a.utils.object.merge([a.utils.object.clone(f),b.settings.defaultParams]);this.originalParams=a.utils.object.clone(f);this.callback=f.callback}f.prototype.start=function(){var d=this;b.apiAdapter.isSessionValid(this.params,function(b){!d.api.adapterSettings.requiresSession()||b||d.doesHaveAltSessionParam()?d.sendRequest(b):d.afterServerApiResponse(a.utils.object.clone({status:"FAIL",errorMessage:"Unauthorized user",statusMessage:"Unauthorized user",errorCode:403005}),!1)})};f.prototype.sendRequest=
function(d){var f=this,c=a.utils.object.merge([this.api.adapterSettings,{cacheTimeout:this.params.cacheTimeout}]);this.beforeRequest(d,function(e){e?f.afterServerApiResponse(e,d):(a.events.global.dispatch({eventName:"beforeRequest",methodName:f.api.methodName,rawParams:f.originalParams,params:f.params},f.originalParams),f.api.settings.oauth?b.apiAdapter.sendOauthRequest(f.api.methodName,f.params,function(a){f.afterServerApiResponse(a,d)},c):b.apiAdapter.sendRequest(f.api.methodName,f.params,function(a){f.afterServerApiResponse(a,
d)},c))})};f.prototype.beforeRequest=function(d,f){var c=this;a.external.backplane.isLoaded()&&!a.external.backplane._ready&&b.loginMethods[this.api.methodName]?a.external.backplane.executeOnInit(function(){c.beforeRequest(d,f)}):(a._.logoutMethods[this.api.methodName]&&(!d&&!this.params.regToken||a.partnerSettings.ssoLogoutUrl&&document.location.href==a.partnerSettings.ssoLogoutUrl)&&f(e(null)),this.handleDeprecatedParams(),this.handleCollections(),this.handleConnectWithoutLoginBehavior(d),this.params.extraPermissions=
this.params[this.params.provider+"ExtraPermissions"]||this.params.permissions,this.api.preprocessRequest(this.params,function(){c.setOverridableParams(function(){c.setNonOverridableParams(d,function(){c.filterParams(c.params);a.log.logCall(c.api.methodName,c.originalParams,c.originalParams.lastSource);f()})})}))};f.prototype.setOverridableParams=function(b){a.utils.object.merge([{},this.params]);b()};f.prototype.doesHaveAltSessionParam=function(){if(this.api.altSessionParams){for(var a=this.api.altSessionParams.split("|"),
b=0;b<a.length;b++)if(this.params[a[b]])return!0;return!1}};f.prototype.setNonOverridableParams=function(d,f){if(null!=this.params.APIKey){var c=a.utils.cookie.get("gltexp_"+this.params.APIKey);null!=c&&(this.params.loginTokenExp=c)}(c=a.utils.cookie.get("_gigRefUid_"+this.params.APIKey))&&(d||b.loginMethods[this.api.methodName])&&(this.params.refUID=c);if(a.providersConfig.facebook&&!h){var c=a.external.facebook.getParams(),e;for(e in c)this.params[e]=c[e];h=!0}0==this.api.methodName.indexOf("accounts.")&&
(a.events.global._activeNamespaces.socialize&&null==this.params.includeUserInfo&&(this.params.includeUserInfo=!0),this.params.include=this.params.include?this.params.include+",":"profile,data");"accounts.getSchema"==this.api.methodName&&(this.params.includeDynamicSchema="clientOnly");(e=a.external.backplane.getChannelId())&&(this.params.bp_channel_url=e);this.params.targetEnv="jssdk";f()};f.prototype.handleDeprecatedParams=function(){this.params.pendingRegistration?this.params.pending_registration=
this.params.pendingRegistration:this.params.newUsersPendingRegistration&&(this.params.pending_registration=this.params.newUsersPendingRegistration);!0==this.params.alwaysForceAuthentication&&(this.params.forceAuthentication=!0);this.params.timestamp&&(this.params.UIDTimestamp=this.params.timestamp,delete this.params.timestamp);this.params.signature&&0==this.api.methodName.indexOf("socialize.")&&(this.params.UIDSig=this.params.signature,delete this.params.signature);this.params.nonce&&(this.params.UIDNonce=
this.params.nonce,delete this.params.nonce);this.params.format&&!this.params.dataFormat&&(this.params.dataFormat=this.params.format,delete this.params.format)};f.prototype.handleCollections=function(){this.params.recipients&&(this.params.recipients=this.extractListOfGIGUIDs(this.params.recipients));if(this.params.friends){var a=this.extractListOfGIGUIDs(this.params.friends);0<this.params.UIDs.length&&(this.params.UIDs+=",");this.params.UIDs+=a}};f.prototype.extractListOfGIGUIDs=function(b){var f=
this;switch(typeof b){case "string":return b;case "object":if("undefined"!=typeof b.UID)return b.UID;if(b instanceof a.socialize.Collection){var c=[];b.each(function(a,b){var d=f.extractListOfGIGUIDs(a);null!=d&&""!=d&&c.push(d)});return c.join(",")}}};f.prototype.handleConnectWithoutLoginBehavior=function(a){if("socialize.addConnection"==this.api.methodName){var f=this.params.connectWithoutLoginBehavior;f&&(f=f.toLowerCase());"loginexistinguser"==f&&(this.params.loginIfExists=!0);a||(this.api=b.getApi("socialize.login"),
"alwayslogin"!=f&&(this.params.temporary_account=!0))}};f.prototype.filterParams=function(b){this.params=a.utils.object.extractProperties(b,{},this.getFullSchema())};f.prototype.getFullSchema=function(){if(null==this.api.schema)return"";for(var b=(this.api.schema+"|"+a._.defaultApiSchema).split("|"),f=0;f<b.length;f++){var c=b[f];if(-1!=c.toLowerCase().indexOf("[providercapability=")){for(var e=c.toLowerCase().split("=")[1].split("]")[0],c=c.split("]")[1],e=a.socialize.getProvidersForRequiredCapabilities(a.socialize.getProvidersByName("*"),
[e]),g=[],h=0;h<e.length;h++)g.push(e[h].name+c);b[f]=g.join("|")}}return b.join("|")};f.prototype.preprocessServerResponse=function(b){b.userInfo&&0!=this.api.methodName.indexOf("accounts.")&&("string"==typeof b.userInfo&&(b.userInfo=a.utils.JSON.deserialize(b.userInfo)),b.userInfo&&(b=a.utils.object.merge([b.userInfo,b]),b.errorCode=b.userInfo.errorCode,delete b.userInfo));b.accountInfo&&"string"==typeof b.accountInfo&&(b.accountInfo=a.utils.JSON.deserialize(b.accountInfo),b.accountInfo&&(b=a.utils.object.merge([b.accountInfo,
b]),delete b.accountInfo));try{b.settings&&"string"==typeof b.settings&&(b.settings=a.utils.JSON.deserialize(b.settings))}catch(f){}return b};f.prototype.onAfterLogoutMethod=function(){a.external.backplane.resetChannel()};f.prototype.getExpiredSessionResponse=function(a){switch(this.api.methodName){case "socialize.setUserSettings":this.originalParams.disableLocalSettings||(b.setGigyaSettings(this.params.group,this.params.settings),a=e(a));break;case "socialize.delUserSettings":this.originalParams.disableLocalSettings||
(b.delGigyaSettings(this.params.group,this.params.settings),a=e(a));break;case "socialize.getUserSettings":if(!this.originalParams.disableLocalSettings){var f=b.getGigyaSettings(this.params.group);a=e(a);a.settings=f}break;case "socialize.getUserInfo":a.status="OK";a.statusMessage="";a.errorCode=0;a.statusCode=0;a.errorMessage="";a.errorDetails="";a.statusReason="";break;case "accounts.logout":case "socialize.logout":a=e(a)}return a};f.prototype.afterServerApiResponse=function(d,f){var c=this;b.checkCompleteRegistration(d,
this.originalParams,function(e,g,h){d=e;d=c.preprocessServerResponse(d);if(b.logoutMethods[c.api.methodName]&&0==d.errorCode&&d.logoutActiveSession)c.onAfterLogoutMethod();403005==d.errorCode&&(d=c.getExpiredSessionResponse(d));0==d.errorCode&&(f||b.loginMethods[c.api.methodName])&&a.utils.cookie.remove("_gigRefUid_"+c.originalParams.APIKey);c.handleMethodResponse(d,function(e){d=e;c.addDefaultResponseProperties(d);b.handleSpecialFields(d);c.logoutFromProvidersIfNeeded(d,function(){g||c.generateEventsFromResponse(d,
f);h?c.sendRequest(f):(a.events.global.dispatch({eventName:"afterResponse",methodName:c.api.methodName,filteredParams:c.params,response:d},c.originalParams),"function"==typeof c.callback&&(a.log.addLog("Calling callback for "+c.api.methodName+" with this response object",d),c.callback(d)),c.api.settings.postprocessor&&c.api.settings.postprocessor(c.originalParams,d))})})})};f.prototype.addDefaultResponseProperties=function(a){delete a.statusCode;delete a.statusReason;a.errorCode=a.errorCode||0;a.status=
a.status||(0==a.errorCode?"OK":"FAIL");a.errorMessage=a.errorMessage||"";a.statusMessage=a.statusMessage||a.errorMessage;a.requestParams=this.originalParams;a.requestParams.password&&delete a.requestParams.password;a.context=this.originalParams.context;var b=this.api.methodName.split(".")[0];a.operation="socialize"==b?this.api.methodName.split(".")[1]:"/"+this.api.methodName};f.prototype.handleMethodResponse=function(d,f){if(0==d.errorCode)switch(this.api.methodName){case "accounts.socialLogin":case "socialize.login":d.newUser=
d.x_newUser?!0:!1,delete d.x_newUser;case "socialize.notifyLogin":case "socialize.addConnection":case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "socialize.getUserInfo":delete d.login_token;delete d.expires_in;delete d.id;d.code&&(d.authCode=d.code,delete d.code);if(!(d.authCode||"socialize.notifyLogin"==this.api.methodName&&this.params.authCode)){var c=d;d.userInfo&&(c=d.userInfo,delete d.userInfo);-1==this.api.methodName.indexOf("accounts.")?
(d={user:c},a.utils.object.extractProperties(c,d,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|newUser|signKeysUIDSignature"),d.user.hasOwnProperty("UIDSig")&&(d.signature=d.user.UIDSig),c.profile&&delete c.profile,c.data&&delete c.data,delete c.status,delete c.statusMessage,delete c.callId,delete c.errorCode,delete c.errorMessage,delete c.errorDetails,delete c.settings,delete c.context):d!=c&&(d.user=
c);""==c.age||isNaN(parseInt(c.age))||(c.age=parseInt(c.age));c.suppressEvents&&(d.suppressEvents=!0);if("string"==typeof c.capabilities){var e=c.capabilities;e||(e="");"object"!=typeof c.capabilities&&(c.capabilities={});e=e.toLowerCase();c.capabilities={actions:-1<e.indexOf("actions"),friends:-1<e.indexOf("friends"),login:-1<e.indexOf("login"),status:-1<e.indexOf("status"),notifications:-1<e.indexOf("notifications"),contacts:-1<e.indexOf("contacts"),photos:-1<e.indexOf("photos")}}b.convertIdentitiesArrayToObject(c);
"string"==typeof c.providers&&(c.providers=c.providers.split(","));this.params.group&&!d.settings&&(c=b.getGigyaSettings(this.params.group),d.settings=c)}break;case "socialize.getAvailableProviders":c={};for(e=0;e<d.availableProviders.length;e++)c[d.availableProviders[e].name]=d.availableProviders[e];d.availableProviders=c}"socialize.removeConnection"==this.api.methodName&&0==d.errorCode?a.socialize.getUserInfo(this.originalParams,{callback:function(a){f(a)}}):f(d)};f.prototype.logoutFromProvidersIfNeeded=
function(d,c){if(b.logoutMethods[this.api.methodName]&&0===d.errorCode){d.logoutActiveSession&&a._.apiAdapter.clearSession(this.params.APIKey);var f=[],e;d.connectedProviders?e=d.connectedProviders.toLowerCase():d.provider&&(e=d.provider.toLowerCase());if(e&&!a.utils.validation.isExplicitFalse(this.originalParams.forceProvidersLogout)){var h=e.split(",");for(e=0;e<h.length;++e){var n=h[e],r=g[n],q=null;0===n.indexOf("saml-")&&(r=5,q=n.substring(5));f.push({type:r,data:q})}}if(d.samlContext&&d.connectedSamlSessions)for(h=
d.samlContext,n=d.connectedSamlSessions.split(","),e=0;e<n.length;++e)f.push({type:6,data:{samlContext:h,samlSession:n[e]}});if(f.length){var s=0,t=!1,w=function(){t||(t=!0,c())};window.setTimeout(w,5E3);for(e=0;e<f.length;e++)this.logoutFromProvider(f[e],function(){s++;s==f.length&&w()})}else c()}else c()};f.prototype.logoutFromProvider=function(b,c){var f="",e=!1,g=!0,h;h=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:"fidm."+a.partnerSettings.plugins.apiDomain;
switch(b.type){case 1:if(a.providersConfig.facebook){a.socialize.waitForService({service:"facebook",callback:function(){a.external.facebook.isLoggedIn&&FB.logout?FB.logout(function(){a.external.facebook.refreshSession();c()}):c()}});return}break;case 2:f="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";break;case 5:f=a.utils.URL.addParamsToURL("https://"+h+"/saml/v2.0/"+this.params.APIKey+"/sp/jsslo",{name:b.data});e=!0;g=!1;break;case 6:f=a.utils.URL.addParamsToURL("https://"+h+
"/saml/v2.0/"+this.params.APIKey+"/idp/slo/continue/",b.data),e=!0,g=!1}f?(g&&(f+=(new Date).getTime()),a.utils.script.triggerResource(f,c,e?2:1)):c()};f.prototype.generateEventsFromResponse=function(c,f){var e=this,g;if(0==c.errorCode)switch(this.api.methodName){case "accounts.logout":case "socialize.logout":case "socialize.unlinkAccounts":case "socialize.deleteAccount":g={eventName:"logout,accounts.logout"};break;case "socialize.linkAccounts":case "socialize.setUID":b.addUserInfoToEvent(c,g,!0);
break;case "socialize.removeConnection":g={eventName:"connectionRemoved,disconnect",provider:this.params.provider||""};b.addUserInfoToEvent(c,g);break;case "socialize.addConnection":!f&&c.user.isLoggedIn?(g={eventName:"login",provider:this.params.provider},b.addUserInfoToEvent(c,g,!0)):(g={eventName:"connectionAdded,connect",provider:this.params.provider},b.addUserInfoToEvent(c,g));break;case "accounts.linkAccounts":case "accounts.finalizeRegistration":case "accounts.login":case "accounts.register":case "accounts.socialLogin":this.dispatchAccountsLoginEvent(c);
case "socialize.finalizeRegistration":case "socialize.register":case "socialize.login":if(!c.user&&!c.authCode)break;g={eventName:"login"};var h=this.params.provider;if(!h&&c.providerSessions)for(var n in c.providerSessions){h=n;break}g.provider=h||"site";g.loginMode=this.originalParams.loginMode||"standard";g.newUser=c.newUser||!1;c.authCode&&(g.authCode=c.authCode);b.addUserInfoToEvent(c,g,!0);c.user&&h&&(h=h.toLowerCase(),a.utils.cookie.set("_gig_llp",h),a.utils.cookie.set("_gig_llu",c.user.firstName||
""));break;case "socialize.notifyLogin":this.params.authCode||(g||(g={eventName:"login"}),g.provider="site",b.addUserInfoToEvent(c,g,!0));break;case "gm.notifyAction":a.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}b.loginMethods[this.api.methodName]&&this.originalParams.redirectURL&&g&&g.user&&0==c.errorCode&&a.utils.HTTP.redirect(this.originalParams.redirectURL,[g,g.user],this.originalParams.redirectMethod);0==c.errorCode&&g&&"login"==g.eventName&&!c.profile&&a.events.global._activeNamespaces.accounts&&
-1==this.api.methodName.indexOf("accounts")&&a.accounts.getAccountInfo(this.originalParams,{include:"profile,data",includeUserInfo:!1,callback:function(a){e.dispatchAccountsLoginEvent(a)}});null!=g&&(g.context=this.originalParams.context,a.events.global.dispatch(g,this.originalParams))};f.prototype.dispatchAccountsLoginEvent=function(b){var c={eventName:"accounts.login",remember:a.utils.validation.isExplicitTrue(this.originalParams.remember),provider:this.originalParams.provider?this.originalParams.provider.toLowerCase():
""};a.utils.object.extractProperties(b,c,"newUser|signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|signKeysUIDSignature");a.events.global.dispatch(c,this.originalParams)};return f}();b.ServerApiRequest=c})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){b.__pluginsCoreLoaded=!1;var e={showReactionsBarUI:["barID"],showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},h=function(g){function c(a,b,c,e,h,l){"undefined"===typeof c&&(c={});"undefined"===typeof e&&(e={});"undefined"===typeof h&&(h="");"undefined"===typeof l&&(l={});g.call(this,l.apiName||b.split(".")[0]+"."+a,l);this.methodName=a;this.jsName=b;this.settings=l;l.defaultParams=c||{};l.defaultPopupParams=e||{};
l.requiredParams=h||""}__extends(c,g);c.versionSelector=function(b,c,e,g){var h=this;a.utils.functions.createAlias("gigya."+c+"."+b,function(){for(var c=[],d=0;d<arguments.length-0;d++)c[d]=arguments[d+0];var r=c[0],d=c[1];d||(d=r,r=null);d||(d={},c.push(d));var r=a.utils.object.merge([{},r,d]).version||e,q=g[r]||g[e];if(q){var s=eval(q);d.originalMethodName=b;d.selectedMethodName=q;d.ctag=b+"_v"+r;return s.apply(h,c)}throw Error("unsupported version: "+(c.version||e));})};c.createApi=function(a,
b,e,g,h,l){"undefined"===typeof h&&(h={});h.useBasePlugin=!0;a=new c(a,g,null,null,null,h);a.namespace=b;a.className=e;a.instanceMethods=l||[];a.addInstanceMethodAliases();return a};c.prototype.addInstanceMethodAliases=function(){for(var c=this,d=0;d<this.instanceMethods.length;d++){var e=this.instanceMethods[d];a.utils.functions.createAlias("gigya."+this.namespace+"."+e,function(a){if(c.injectionInfo&&c.injectionInfo.instanceMethods[e]){var d=b.plugins.getPluginInstance(a,c.injectionInfo);if(d instanceof
c.pluginType)c.injectionInfo.instanceMethods[e](d,a)}})}};c.prototype.preprocessRequest=function(a,b){var c=this;g.prototype.preprocessRequest.call(this,a,function(){a.source||c.setSourceData(a);b&&b()})};c.prototype.run=function(b){var c=this;!this.settings.waitForAPIQueue||b.ignoreApiQueue?this.startUI(b):a.utils.queue.queueForExecution("API",function(){c.startUI(b)})};c.prototype.startUI=function(b){var c=this;g.prototype.run.call(this,b);b=a.utils.object.clone(b);this.prepareParameters(b);this.preprocessRequest(b,
function(){c.settings.useBasePlugin?c.loadPluginJS(b,function(e){a.utils.queue.queueForExecution("UI",function(){e&&c.className&&(c.pluginType=eval("gigya._.plugins."+c.className),c.injectionInfo=c.pluginType.injectionInfo(c));var g=function(){c.startPlugin(b)};!1==b.waitForDebug?g():a.utils.queue.queueForExecution("debug",g)})}):c.legacyStartUI(b)})};c.prototype.startPlugin=function(c){a.events.global.dispatch({eventName:"beforePluginRequest",methodName:this.methodName,params:c},c);var d=c.originalMethodName||
this.methodName;a.log.logCall(d,c);a.reports.reportLoad(d,c);this.pluginType?(c&&(d=b.plugins.getPluginInstance(c,this.injectionInfo))&&d.dispose&&d.dispose(),d=new this.pluginType(c,this.injectionInfo),b.plugins.setPluginInstance(c,this.injectionInfo,d),d.start()):a.utils.functions.callFunction("gigya."+this.jsName+"."+this.methodName,[c,c,c])};c.prototype.loadPluginJS=function(c,d){if(this.wasPluginJSLoaded(c))d&&d(!1);else{var e=a._.getCdnResource("/js/"),g=!1,h="gigya.services."+this.jsName;b.__pluginsCoreLoaded?
e+=h+".min.js"+(c.lang?"?lang="+c.lang:""):(e+="gigya.services.plugins.base.min.js?services="+h+(c.lang?"&lang="+c.lang:""),g=b.__pluginsCoreLoaded=!0,a.utils.queue.hold("pluginsJS","UI"));a.utils.script.load(e,null,function(){g&&a.utils.queue.release("pluginsJS","UI");d&&d(!0)},!0)}};c.prototype.wasPluginJSLoaded=function(b){var c="gigya."+this.jsName+"."+this.methodName,e="gigya.services."+this.jsName+".js";try{var g=eval(c),h=a.i18n[e][b.lang]}catch(l){return!1}return"undefined"!=typeof g&&"undefined"!=
typeof h};c.prototype.setSourceData=function(a){a.source="socialize.showSimpleShareUI"==this.methodName?"socialize.showShareUI":a.originalMethodName||this.methodName;if(!a.sourceData&&e[this.methodName]){for(var b={},c,g=0;g<e[this.methodName].length;g++){var h=e[this.methodName][g];null!=a[h]&&(c=!0,b[h]=a[h])}c&&(a.sourceData=b)}a.pluginsStack||(a.pluginsStack=[]);a.pluginsStack.push({source:this.methodName});a.lastSource=this.methodName};c.prototype.validateRequiredParams=function(b){for(var c=
this.settings.requiredParams.split("|"),e=0;e<c.length;e++){var g=c[e];if(""!=g&&(null==b[g]||""==b[g]))return a.events.dispatchInvalidParamError(b,g),!1}return!0};c.prototype.setDefaultParams=function(a){var b=!a.containerID||a.isPopup,c;for(c in this.settings.defaultParams)null==a[c]&&(a[c]=b&&this.settings.defaultPopupParams[c]?this.settings.defaultPopupParams[c]:this.settings.defaultParams[c]);if(b)for(c in this.settings.defaultPopupParams)a[c]||(a[c]=this.settings.defaultParams[c])};c.prototype.prepareParameters=
function(b){for(var c in b)-1!=c.toLowerCase().indexOf("provider")&&"string"==typeof b[c]&&(b[c]=a._.providers.replaceProviderAliases(b[c]));b.lang||(b.lang=a.thisScript.lang.langCode);b.source?b.isPopup=!1:this.setSourceData(b)};c.prototype.legacyStartUI=function(b){var c=this,e=b.containerID;if(this.settings.ignoreContainerId)e=b.containerID="";else if(null==b.containerID&&!this.settings.allowPopup||b.containerID&&!document.getElementById(b.containerID)){a.events.dispatchInvalidParamError(b,"containerID");
return}var g=this.settings.allowPopup&&(!e||b.isPopup);g&&this.settings.useNewModal&&(b.useNewModal=!0);this.setDefaultParams(b);this.settings.allowPopup||g||a.utils.DOM.clearByID(e);this.validateRequiredParams(b)&&this.loadPluginJS(b,function(){var e=function(){c.prepareContainer(b,g,function(){c.startPlugin(b)})};a.utils.queue.queueForExecution("UI",function(){!1==b.waitForDebug?e():a.utils.queue.queueForExecution("debug",e)})})};c.prototype.prepareContainer=function(b,c,e){var g=this;if(document.body){var h=
b.containerID;c&&(h=a.utils.DOM.getCenteredDivID(this.methodName),b.newModal&&(h+=(new Date).getTime()),b.containerID=h,b.isPopup=!0,document.getElementById(h)||a.utils.DOM.createTopLevelDiv(h));var l=document.getElementById(h);if(l){var n=l.Reqs?l.Reqs:l.Reqs=[],r=n.length+"@0@"+h;b.rid=r;n[n.length]={rid:r,container:l,method:this.methodName,context:b.context,c:b,p:b,i:b,operation:this.methodName,isHTML:!0};if(l&&l.style){l.style.display="";l.style.visibility="";if(h=document.getElementById("gigya_ifr_"+
h))h.style.display="",h.style.visibility="";null!=h&&(a.utils.DOM.setSize(h,b.width,b.height,c),h.style.visibility="visible");a.utils.DOM.setSize(l,b.width,b.height,c)}h=this.methodName.split(".").pop();l.setAttribute&&l.setAttribute("gigid",(b.source&&b.source!=h?b.source+"_":"")+h)}else a.events.dispatchInvalidParamError(b,"containerID");e()}else window.setTimeout(function(){g.prepareContainer(b,c,e)},200)};return c}(b.BaseApi);b.UiApi=h})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){function b(a,c){return a.isPopup?"gigya-modal-plugin-container-"+c.methodName:a.containerID}a.instances={};a.getPluginInstance=function(g,c){return a.instances[b(g,c)]};a.setPluginInstance=function(g,c,f){a.instances[b(g,c)]=f};a.removePluginInstance=function(g,c){delete a.instances[b(g,c)]}})(a.plugins||(a.plugins={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.registerPlugin=function(b){a.utils.queue.queueForExecution("UI",b)};b.attachPlugin=function(b,e,c,f){e||(e="socialize");a[e]||(a[e]={});a[e].plugins||(a[e].plugins={});a[e].plugins[c]||(a[e].plugins[c]={instances:[]});var d=a[e].plugins[c];d[f]||(d[f]=function(a){a=new b(a,"gigya."+e+".plugins."+c+".instances["+d.instances.length+"]");d.instances.push(a)});if(b.StaticApi)for(var k in b.StaticApi)a.utils.functions.createAlias("gigya."+e+".plugins."+c+"."+k,
b[b.StaticApi[k]])}})(b.UI||(b.UI={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.didChatAuthenticate=!1;b.init=function(){a.socialize.addEventHandlers({listenerType:"component"},{onLogin:function(){b.didChatAuthenticate=!1}});b.didChatAuthenticate=!1};b.beforeChatRequest=function(h,g){b.didChatAuthenticate?g():(b.didChatAuthenticate=!0,a.socialize.getUserInfo({signIDs:!0,callback:function(a){0==a.errorCode&&""!=a.user.UID&&""!=a.user.UIDSignature&&""!=a.user.signatureTimestamp&&(h.UID=a.user.UID,h.UIDSignature=a.user.UIDSignature,h.signatureTimestamp=
a.user.signatureTimestamp,h.loginTokenExp=a.user.loginTokenExp?a.user.loginTokenExp:0);g()}}))}})(b.chat||(b.chat={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){b.defaultApiSchema="ctag|APIKey|cid|oauth_token|source|sourceData|usePost|refUID|fb_UID|fb_at|fb_exp";b.defaultOauthSchema="ctag|temporary_account|authFlow|connectWithoutLogin|provider|redirectMethod|redirect_uri|pendingRegistration|lang|regSource|extraPermissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url|loginIfExists|includeUserInfo|redirectURL|authCodeOnly|enablePopupLocation|invite|regToken|loginMode|apiDomain|conflictHandling|forcePermissions|signKeys";b.postBookmarkSchema=
"provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes|facebookDialogType";b.loginMethods={"socialize.login":1,"socialize.addConnection":1,"socialize.notifyLogin":1,"socialize.linkAccounts":1,"accounts.login":1,"accounts.socialLogin":1,"accounts.linkAccounts":1,"accounts.register":1,"accounts.finalizeRegistration":1};var e=function(a){return"link"!==a.loginMode&&"reAuth"!==a.loginMode},
h=function(a,b){b()};b.logoutBehaviour={logoutBeforeServerResponse:!0,alwaysSendLogoutToServer:!1};b.logoutMethods={"socialize.logout":1,"accounts.logout":1,"socialize.deleteAccount":1,"socialize.unlinkAccounts":1};var g=function(b,c){a.partnerSettings.ssoKey&&(b.signIDs=!0);c()},c=function(){return!b.logoutBehaviour.alwaysSendLogoutToServer},f={preprocessor:a._.chat.beforeChatRequest};b.arApiList=[new b.ServerApi("socialize.login",b.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:e,
forceHttps:!0}),new b.ServerApi("socialize.addConnection",b.defaultOauthSchema,!1,{oauth:!0},{forceHttps:!0}),new b.ServerApi("socialize.requestPermissions",b.defaultOauthSchema,!0,{oauth:!0,defaultParams:{forcePermissions:!0}}),new b.ServerApi("accounts.socialLogin",b.defaultOauthSchema,!1,{oauth:!0},{preprocessor:h,clearSessionCondition:e,forceHttps:!0}),new b.UiApi("showDebugUI","socialize.plugins.debug",{},{},"",{allowPopup:!0}),b.UiApi.createApi("showRatingUI","comments","rating.RatingPlugin",
"comments.plugins.rating"),new b.UiApi("showCommentsUI","comments.plugins.comments",{width:500},{},"",{preprocessor:function(b,c){b.ctag=2!=b.version?"comments_v1":"comments_v2";2==b.version&&a.utils.browser.isModern()?a.comments.showCommentsUI2(b):c()}}),new b.UiApi("showCommentsUI","comments.plugins.comments2",{width:500},{},"",{apiName:"comments.showCommentsUI2"}),new b.UiApi("showShareUI","socialize.plugins.share",{width:520,height:320},{width:595,height:324},"userAction",{allowPopup:!0,preprocessor:function(c,
e){var f=c.operationMode;f&&(f=f.toLowerCase().replace(/ /g,""));c.containerID||(delete c.width,delete c.height);b.apiAdapter.isSessionValid(c,function(b){"simpleshare"==f||"autodetect"==f&&!b?a.socialize.showSimpleShareUI(c):e()})}}),b.UiApi.createApi("showMessageUI","_","messages.MessagesPlugin","_.plugins.messages"),new b.UiApi("showLoginUI_v1","socialize.plugins.login",{width:120,height:110},{width:280,height:220},"",{allowPopup:!0}),b.UiApi.createApi("showLoginUI_v2","socialize","login_v2.LoginPlugin",
"socialize.plugins.login_v2"),b.UiApi.versionSelector("showLoginUI","socialize","1",{1:"gigya.socialize.showLoginUI_v1",2:"gigya.socialize.showLoginUI_v2"}),new b.UiApi("showAddConnectionsUI_v1","socialize.plugins.login",{width:110,height:65},{width:250,height:200},"",{allowPopup:!0}),b.UiApi.createApi("showAddConnectionsUI_v2","socialize","login_v2.LoginPlugin","socialize.plugins.login_v2"),b.UiApi.versionSelector("showAddConnectionsUI","socialize","1",{1:"gigya.socialize.showAddConnectionsUI_v1",
2:"gigya.socialize.showAddConnectionsUI_v2"}),new b.UiApi("showFriendSelectorUI","socialize.plugins.friendSelector",{width:400,height:360},{},"",{allowPopup:!0}),new b.UiApi("showFeedUI","socialize.plugins.newsfeed",{width:304,height:265}),new b.UiApi("showChatUI","chat.plugins.chat",{width:300,height:450},{},"",{preprocessor:function(a,b){a.site&&(a.categoryID=a.site);a.stream&&(a.streamID=a.stream);a.skin&&(a.skinID=a.skin);a.streamID=a.streamID||0;b()}}),b.UiApi.createApi("showEditConnectionsUI",
"socialize","editConnections.EditConnectionPlugin","socialize.plugins.edit"),new b.UiApi("showShareBarUI","socialize.plugins.reactions",{shareCountCacheTimeout:3E5},{},"userAction|shareButtons"),new b.UiApi("showReactionsBarUI","socialize.plugins.reactions",{},{},"userAction|barID|reactions",{preprocessor:function(a,b){a.barID||(a.barID=a.itemID);b()}}),new b.UiApi("showMiniShareUI","socialize.plugins.minishare",{width:320,height:153},{},"",{allowPopup:!0}),new b.UiApi("showFollowBarUI","socialize.plugins.followbar",
{},{},"buttons"),new b.UiApi("showBookmarkUI","socialize.plugins.bookmark",{width:310,height:250},{width:310,height:310}),new b.UiApi("showSimpleShareUI","socialize.plugins.simpleShare",{width:280,height:175},{},"userAction",{allowPopup:!0,dontLoadPluginsCore:!0,waitForAPIQueue:!0}),new b.UiApi("showShareMobileUI","socialize.plugins.shareMobile",{},{},"userAction",{allowPopup:!0}),new b.UiApi("showUserStatusUI","gm.plugins.userStatus",{width:300,hidePoints:!1,hideActions:!1},{},"",{requireSession:!0}),
new b.UiApi("showAchievementsUI","gm.plugins.achievements",{width:300,height:100,excludeChallenges:"_default"}),new b.UiApi("showChallengeStatusUI","gm.plugins.achievements",{width:300,height:100,challenge:"_default"}),new b.UiApi("showLeaderboardUI","gm.plugins.leaderboard",{width:300},{},"",{preprocessor:function(a,b){a&&a.height&&(a.height=null);b()}}),new b.UiApi("showNotifications","gm.plugins.notifications",{},{},"",{preprocessor:function(b,c){var e=a.utils.localStorage.getObject("gmSettings");
e&&e.disableNotifications||(b.containerID="gigNotifications",document.getElementById(b.containerID)||(e=document.createElement("div"),e.id=b.containerID,e.style.position="absolute",e.style.left="-1000px",a.utils.DOM.appendToBody(e)),c())}}),new b.UiApi("showTfaUI","accounts.plugins.tfa",{width:325}),new b.UiApi("showScreenSet","accounts.plugins.screenSet",{},{},"screenSet",{allowPopup:!0}),new b.UiApi("hideScreenSet","accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new b.UiApi("switchScreen",
"accounts.plugins.screenSet",{},{},"",{allowPopup:!0}),new b.ServerApi("socialize.getAvailableProviders","enabledProviders|disabledProviders|requiredCapabilities"),new b.ServerApi("socialize.notifyLogin","siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|regSource|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url|signKeys",
!1,void 0,{forceHttps:!0,clearSession:!0}),new b.ServerApi("socialize.shortenURL","URL"),new b.ServerApi("socialize.convertAction","userAction|[providerCapability=actions]UserAction|provider"),new b.ServerApi("socialize.getReactionsCount","barID|buttonIDs|reportLoad"),new b.ServerApi("socialize.incrementReactionsCount","barID|buttonID|count|actionAttributes|profileAttributes"),new b.ServerApi("socialize.deleteAccount",void 0,!0),new b.ServerApi("socialize.delUserSettings","group|settings",!0),new b.ServerApi("socialize.getAlbums",
"type|enabledProviders|disabledProviders",!0),new b.ServerApi("socialize.getContacts","enabledProviders|disabledProviders",!0),new b.ServerApi("socialize.getFriendsInfo","enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs",!0),new b.ServerApi("socialize.getPhotos","enabledProviders|disabledProviders|albumIDs|tags",!0),new b.ServerApi("socialize.getRawData","provider|UID|fields|dataFormat|path",!0),new b.ServerApi("socialize.getSessionInfo","provider|paddingMode|encrypt|signIDs|encryptAll",
!0),new b.ServerApi("socialize.getUserInfo","enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID",!0),new b.ServerApi("socialize.getUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new b.ServerApi("socialize.getPlaces","enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults",!0),new b.ServerApi("socialize.checkin","enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes",
!0),new b.ServerApi("socialize.logout","signIDs|samlContext",!0,{preprocessor:g,disableCache:!0},{requiresSession:c}),new b.ServerApi("socialize.notifyRegistration","siteUID|UIDTimestamp|UIDSig",!0),new b.ServerApi("socialize.publishUserAction","userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.removeConnection","provider|lastIdentityHandling|removeLoginID",
!0),new b.ServerApi("socialize.sendNotification","recipients|body|subject|shortURLs|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.setStatus","shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes",!0),new b.ServerApi("socialize.setUID","siteUID|UIDTimestamp|UIDSig",!0),new b.ServerApi("socialize.setUserSettings","group|settings|regToken",!0,void 0,{forceHttps:!0},"regToken"),new b.ServerApi("socialize.unlinkAccounts",
void 0,!0),new b.ServerApi("socialize.getFeed","feedID|startTS|endTS|groups|limit|includeUID"),new b.ServerApi("socialize.sendEmail","dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket|lang",!1,void 0,{forceHttps:!0}),new b.ServerApi("socialize.facebookGraphOperation","graphPath|graphParams|authRequired|method|authType"),new b.ServerApi("socialize.getTopShares",
"age|tag|limit"),new b.ServerApi("socialize.notifySSOLogin","bp_channel_url"),new b.ServerApi("gm.getChallengeStatus","UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new b.ServerApi("gm.resetLevelStatus","challenges|actionAttributes|profileAttributes",!0),new b.ServerApi("gm.getTopUsers","challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new b.ServerApi("gm.getChallengeConfig","UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),
new b.ServerApi("gm.notifyAction","action|operation|challengeIDs|actionAttributes|profileAttributes",!0),new b.ServerApi("comments.updateComment","categoryID|streamID|commentID|commentText|commentTitle|ratings|mediaItems|taggedUsers"),new b.ServerApi("comments.postComment","categoryID|streamID|parentID|guestName|guestEmail|commentText|anonymous|mediaItems|privacy|feedID|userAction|[providerCapability=actions]UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|taggedUsers|streamTags|actionAttributes|profileAttributes"),
new b.ServerApi("comments.getComments","categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|markupType|includeUserOptions|includeUserComments|includeRatingsDims|includeUserHighlighting|pinnedCommentID"),new b.ServerApi("comments.setStreamInfo","categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new b.ServerApi("comments.getTopStreams","categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingsCount"),
new b.ServerApi("comments.getTopRatedStreams","categoryID|limit|maxStreamAge|ratingClass|minRatingsCount|streamTag"),new b.ServerApi("comments.getStreamInfo","categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims|includeRatingDetails"),new b.ServerApi("comments.flagComment","categoryID|streamID|commentID|actionAttributes|profileAttributes"),new b.ServerApi("comments.vote","categoryID|streamID|commentID|vote|actionAttributes|profileAttributes",!0),new b.ServerApi("comments.getUserVotes",
"categoryID|streamID",!0),new b.ServerApi("comments.getUserComments","categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo|includeUserHighlighting",!0),new b.ServerApi("comments.getFriendsComments","categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo",!0),new b.ServerApi("comments.getThread","categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),new b.ServerApi("comments.deleteComment","categoryID|streamID|commentID",!0),
new b.ServerApi("comments.getRelatedUsers","categoryID|streamID|parentCommentID|usernamePrefix|limit"),new b.ServerApi("comments.analyzeMediaItem","categoryID|urls"),new b.ServerApi("comments.subscribe","categoryID|streamID|email|lang"),new b.ServerApi("comments.unsubscribe","categoryID|streamID|unsubscribeToken"),new b.ServerApi("comments.setUserOptions","replyNotifications|notificationsEmail|notificationsLanguage",!0),new b.ServerApi("comments.getUserOptions","ServerApiKey",!0),new b.ServerApi("gcs.getUserData",
"type|fields",!0),new b.ServerApi("gcs.setUserData","data|type|updateBehavior",!0),new b.ServerApi("gcs.search","expTime|querySig|query"),new b.ServerApi("gcs.getSchema","schemaType"),new b.ServerApi("chat.getSettings","categoryID|streamID|skinID|UID|UIDSignature|signatureTimestamp|loginTokenExp",!1,f),new b.ServerApi("chat.getMessages","categoryID|streamID|start|includeSettings|chatSignature|UID|UIDSignature|signatureTimestamp|loginTokenExp",!1,f),new b.ServerApi("chat.postMessage","categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes|signatureTimestamp|loginTokenExp",
!0,f),new b.ServerApi("chat.resetChat","categoryID|streamID|timestamp|chatSignature"),new b.ServerApi("chat.blockUser","categoryID|streamID|UID|chatSignature"),new b.ServerApi("chat.blockIP","categoryID|streamID|ip|chatSignature"),new b.ServerApi("chat.deleteMessage","categoryID|streamID|messageId|chatSignature"),new b.ServerApi("accounts.login","loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|includeDynamicSchema|bp_channel_url|captchaToken|captchaText|loginMode|signKeys",
!1,void 0,{preprocessor:h,clearSessionCondition:e,forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.linkAccounts","loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url|signKeys",!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.initRegistration","sdk",!1,void 0,{clearSession:!0}),new b.ServerApi("accounts.register","username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|regSource|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url|signKeys",
!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.finalizeRegistration","regToken|targetEnv|include|includeUserInfo|bp_channel_url|allowAccountsLinking|signKeys"),new b.ServerApi("accounts.captchaImage","regToken"),new b.ServerApi("accounts.importProfilePhoto","regToken|URL|publish"),new b.ServerApi("accounts.setProfilePhoto","regToken|publish|photoBytes"),new b.ServerApi("accounts.resetPassword","lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",!1,void 0,
{forceHttps:!0,forcePost:!0}),new b.ServerApi("accounts.isAvailableLoginID","loginID"),new b.ServerApi("accounts.resendVerificationCode","regToken|email"),new b.ServerApi("accounts.getCaptcha",""),new b.ServerApi("accounts.getPolicies","sections"),new b.ServerApi("accounts.getSchema","sections|schemaType"),new b.ServerApi("accounts.getAccountInfo","include|extraProfileFields|regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.setAccountInfo","profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange|conflictHandling",
!1,void 0,{forceHttps:!0,forcePost:!0},"regToken"),new b.ServerApi("accounts.logout","signIDs|samlContext",!0,{preprocessor:g,disableCache:!0},{requiresSession:c}),new b.ServerApi("accounts.search","expTime|querySig|query"),new b.ServerApi("accounts.getScreenSets","screenSetIDs|include"),new b.ServerApi("accounts.getConflictingAccount","regToken|loginID"),new b.ServerApi("accounts.incrementCounters","counters",!0,{preprocessor:function(a,b){var c=a.actionCounterPath,e=a.counters;if(c&&e)for(var f=
0;f<e.length;f++){var g=e[f];"object"!=typeof g||g.path||(g.path=c)}b()}}),new b.ServerApi("accounts.getCounters","counters",!0),new b.ServerApi("accounts.tfa.getProviders","regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.tfa.initTFA","provider|mode|regToken",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.finalizeTFA","gigyaAssertion|providerAssertion|tempDevice|regToken",!0,{},{},"regToken"),new b.ServerApi("accounts.tfa.deactivateProvider","provider",!0),new b.ServerApi("accounts.tfa.unregisterDevice",
"allDevices",!0),new b.ServerApi("accounts.tfa.phone.getRegisteredPhoneNumbers","gigyaAssertion",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.removePhone","gigyaAssertion|phoneId",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.sendVerificationCode","gigyaAssertion|lang|phoneID|phone|method",!1,{},{forceHttps:!0}),new b.ServerApi("accounts.tfa.phone.completeVerification","gigyaAssertion|phvToken|code",!1,{},{forceHttps:!0}),new b.ServerApi("ds.store","type|data|oid|updateBehavior"),
new b.ServerApi("ds.get","type|data|oid|fields"),new b.ServerApi("ds.search","expTime|querySig|query"),new b.ServerApi("ds.getSchema",""),new b.ServerApi("ds.delete","type|oid|fields"),new b.ServerApi("ids.getAccountInfo","include|extraProfileFields",!0),new b.ServerApi("ids.setAccountInfo","profile|data|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer|requirePasswordChange",!1,void 0,{forceHttps:!0,forcePost:!0}),new b.ServerApi("ids.search",
"expTime|querySig|query"),new b.ServerApi("gscounters.sendReport","reports|noAuth")];a.utils.functions.createAlias("gigya.socialize.showChatUI",a.chat.showChatUI);a.utils.functions.createAlias("gigya.socialize.showCommentsUI",a.comments.showCommentsUI);a.utils.functions.createAlias("gigya.socialize.showRatingUI",a.comments.showRatingUI);a.utils.functions.createAlias("gigya.services.socialize",a.socialize);a.utils.functions.createAlias("gigya.services.gcs",a.gcs);a.utils.functions.createAlias("gigya.services.gm",
a.gm);a.utils.functions.createAlias("gigya.services.comments",a.comments);a.utils.functions.createAlias("gigya.services.accounts",a.accounts);a.utils.functions.createAlias("gigya.socialize.connect",a.socialize.addConnection);a.utils.functions.createAlias("gigya.socialize.disconnect",a.socialize.removeConnection);a.utils.functions.createAlias("gigya.socialize.linkAccounts",a.socialize.setUID);a.utils.functions.createAlias("gigya.socialize.showConnectUI",a.socialize.showAddConnectionsUI);a.utils.functions.createAlias("gigya.socialize.showNewsfeedUI",
a.socialize.showFeedUI);a.utils.functions.createAlias("gigya.showDebugUI",a.socialize.showDebugUI)})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){a.socialize.addEventHandlers=function(){for(var b=[],e=0;e<arguments.length-0;e++)b[e]=arguments[e+0];var b=a.utils.object.merge([a.thisScript.globalConf,b]),e=b.namespace?b.namespace:"socialize",d;for(d in b)0==d.indexOf("on")&&a.events.global.add(d,b[d],b.listenerType,b.context,e,b);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:b.context})};a.accounts.addEventHandlers=function(){for(var b=
[],e=0;e<arguments.length-0;e++)b[e]=arguments[e+0];b=a.utils.object.merge([b,{namespace:"accounts"}]);a.socialize.addEventHandlers(b)};a.socialize.isLoggedIn=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.socialize.getUserInfo(b,{callback:function(e){var d=e.user,d={loggedIn:d?a.utils.validation.isExplicitTrue(d.isLoggedIn):!1};a.utils.object.extractProperties(e,d,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context");b.callback&&b.callback(d)}})};
a.socialize.waitForService=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=b.service;if(e){var e=e.toLowerCase(),d=b.callback;if("fbconnect"==e||"facebook"==e)a.external.facebook.isLoaded()?d({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onFacebookLoaded:d,context:b.context});"googleplus"==e&&(a.external.googlePlus.isLoaded()?d({context:b.context}):a.socialize.addEventHandlers({listenerType:"component"},{onGooglePlusLoaded:d,context:b.context}))}};
var e={facebook:{w:640,h:370},twitter:{w:880,h:585},messenger:{w:710,h:905},linkedin:{w:560,h:500},yahoobookmarks:{w:840,h:975},digg:{w:1010,h:1045},delicious:{w:890,h:905},googlebookmarks:{w:710,h:905},mixi:{w:640,h:470},googleplus:{w:496,h:420}};a.socialize.postBookmark=function(){var c=a.utils.object.merge([a.thisScript.globalConf,arguments]);c.APIKey||(c.APIKey=a.thisScript.APIKey);var f={};a.utils.object.extractProperties([c],f,b.postBookmarkSchema);f.sdk="js_"+a.build.version;if(!f.URL&&!f.url&&
f.userAction&&!f.userAction.linkBack)for(var d=document.getElementsByTagName("meta"),g=0;g<d.length;g++)if("og:url"==d[g].getAttribute("property")&&d[g].getAttribute("content")){f.URL=d[g].getAttribute("content");break}f.URL||f.url||!f.userAction||f.userAction.linkBack||(f.URL=document.location.href);delete f.context;f.provider||(f.provider="");f.providerKey||"facebook"==f.provider.toLowerCase()&&(f.providerKey=a.external.opengraph.getMetaTag("fb:app_id"));a._.apiAdapter.getGmidTicket(function(b){b&&
(f.gmidTicket=b);b=a.utils.keyValue.serialize(f);var d=e[f.provider.toLowerCase()],g=c.enablePopupLocation?"location=1,toolbar=1":null;d&&d.w&&d.h&&(g=(c.enablePopupLocation?"location=1,toolbar=1,":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+d.w+",height="+d.h);a.log.logCall("postBookmark",f);a.utils.win.open(a.utils.stringUtils.format("https://socialize.{0}/gs/bookmark.aspx?{1}",a.partnerSettings.plugins.apiDomain,b),"gs_bookmark_"+f.provider,g)})};a.socialize.refreshUI=function(){var c=
a.utils.object.merge([a.thisScript.globalConf,arguments]),e=c.callback;a.socialize.getUserInfo(c,{callback:function(d){var g={eventName:"login",isInternal:!0};c.provider&&(g.provider=c.provider);b.addUserInfoToEvent(d,g,!0);c.context&&(g.context=c.context);a.events.global.dispatch(g);"function"==typeof e&&e(d)}})};var h={"digg.com":"digg","stumbleupon.com":"stumbleupon","delicious.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook",
"linkedin.com":"linkedIn","pinterest.com":"pinterest","mixi.jp":"mixi","b.hatena.ne.jp":"hatena","line.me":"line"},g;a.socialize.trackReferrals=function(){var c=a.utils.object.merge([a.thisScript.globalConf,arguments]),e={eventName:"linkback",CID:c.cid},d={},k={};-1!=document.location.href.indexOf("#")&&(k=a.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&(d=a.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));
k.guid&&"_"!=k.guid&&a.utils.cookie.set("_gigRefUid_"+c.APIKey,k.guid);var p=k._giguuid||d._giguuid;p&&a.utils.cookie.set("_gigRefUid_"+c.APIKey,p);if(p=null!=k._gus||null!=d._gus)e.CID=k._gucid||d._gucid,e.shortCode=k._gsc||d._gsc,e.provider=k._gup||d._gup;if(!g){var m,k={url:document.location.href,ref:document.referrer};d.fb_ref?(m=a.utils.keyValue.deserialize(d.fb_ref,":"),k.uuid=m.uu,k.sn=m.p,m=m.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(d=document.referrer.split("://")[1].split("/")[0],
0==d.indexOf("www.")&&(d=d.split("www.")[1]),h[d]&&(e.provider=k.sn=h[d]));k.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||(d=document.location.href.split("#guid="),1<d.length&&(d=d[1].split("#")[0].split("&")[0],d!=b.apiAdapter.getTokenParam(c.APIKey,"UUID")&&(k.sn="AddressBarShares",k.uuid=d,"_"==d&&delete k.uuid,document.location.replace("#"),a.reports.trackAddressBarShares(),k.url=document.location.href.split("#")[0])));
k.uuid&&a.utils.cookie.set("_gigRefUid_"+c.APIKey,k.uuid);k.sn&&!p&&a.reports.report("linkback",c.APIKey,c.cid,m,null,k);(k.sn||p)&&a.events.global.dispatch(a.utils.object.removeUndefined(e));g=!0}"function"==typeof c.callback&&c.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:c.context,errorMessage:"",errorCode:0})};a.socialize.hideUI=function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);"function"==typeof b.callback&&b.callback({status:"OK",statusMessage:"",
operation:"hideUI",context:b.context,errorMessage:"",errorCode:0})};a.gcs.submitUserForm=function(){var b={},e=a.utils.object.merge([a.thisScript.globalConf,arguments]),d=document.getElementById(e.form);if(!d){var g=document.getElementsByName(e.form);g&&0<g.length&&(e.form=g[0])}for(g=0;g<d.elements.length;g++){var h=d.elements[g];if(h.name){for(var m=h.name.split("."),l=b,n=0;n<m.length-1;n++){var r=m[n];l[r]||(l[r]={});l=l[r]}l[m[m.length-1]]=h.value}}e.data=b;a.gcs.setUserData(e)};a.socialize.getProviderShareCounts=
function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]);a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.shareCounts.min.js"),null,function(){a.socialize.plugins.shareCounts.getProviderShareCounts(b)},!0)};a.utils.functions.createAlias("gigya.setSSOToken",function(){var b=a.utils.object.merge([a.thisScript.globalConf,arguments]),e=b.redirectURL||document.location.href,d=null!=a.partnerSettings.ssoKey,g="1"!=a.utils.localStorage.getItem("_gig_3pc_enabled"),
h=a.utils.JSON.deserialize(a.utils.localStorage.getItem("_gig_ssoToken"))||{},m=h.ssoToken,l=(new Date).getTime();h.exp<l&&a.thisScript.globalConf.enableSSOToken&&d&&g&&null!=m&&a.localInfo.isSafari&&a.localInfo.isIOS?a.utils.HTTP.redirect("https://socialize."+a.partnerSettings.plugins.apiDomain+"/gs/SSOGateway.aspx",[{apiKey:b.APIKey,redirectURL:e,ssoToken:m}],"GET","_top"):a.utils.HTTP.redirect(e,[{}],"GET","_top")})})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.initSSO=function(b){b=a.utils.URL.addParamsToURL(a.samlConfig.proxyPageURL,a.utils.object.merge([{mode:"initSSO"},b]));window.location.href=b};b.continueSSO=function(){var b=a.utils.URL.addParamsToURL(a.samlConfig.proxyPageURL,{mode:"afterLogin"});window.location.href=b}})(b.saml||(b.saml={}))})(a.fidm||(a.fidm={}))})(gigya||(gigya={}));(function(a){a=a._||(a._={});a=a.apiAdapters||(a.apiAdapters={});a.a})(gigya||(gigya={}));
(function(a){(function(b){(function(b){function h(){if("undefined"!=typeof FB){var c=function(c){b.initializedTime=new Date;b.isConnected="connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"FBCRefreshed"})};a.providersConfig.facebook.appID&&FB&&FB.getLoginStatus&&FB.getLoginStatus(c,!0)}}function g(){for(var a=c,b=0;b<a.length;b++)a[b]();c=[]}var c=[];b.initializedTime;b.isLoggedIn=!1;b.isConnected=!1;b.isLoaded=function(){return null!=b.initializedTime};b.load=
function(c){if(!b.initializedTime){b.initializedTime=null;window.setInterval(function(){a.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var d=a.utils.object.clone(a.thisScript.globalConf.facebookInitParams);d||(d={});a.providersConfig.facebook?(d.appId=a.providersConfig.facebook.appID,d.version=a.providersConfig.facebook.version):d.version="v1.0";d.status=!1;d.cookie=!0;d.xfbml=!0;d.oauth=!0;FB.init(d);!0!=c?FB.getLoginStatus(function(c){b.initializedTime=new Date;b.isConnected=
"connected"==c.status;b.isLoggedIn="unknown"!=c.status;a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected});a.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){h()},onConnect:function(){h()},onLogout:function(){h()}})},!0):(b.initializedTime=new Date,a.events.global.dispatch({eventName:"facebookLoaded",isLoggedIn:b.isLoggedIn,isConnected:b.isConnected}))};
var d=document.createElement("div");d.id="fb-root";a.utils.DOM.appendToBody(d);a.utils.script.load(document.location.protocol+"//connect.facebook.net/"+a.thisScript.lang.full.replace("-","_")+"/sdk.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}};b.refreshSession=h;b.retryPending=g;b.runWhenLoaded=function(a){c.push(a)};b.getParams=function(){var a={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var b=FB.getAuthResponse();
b&&(null!=b.userID&&(a.fb_UID=b.userID),null!=b.accessToken&&(a.fb_at=b.accessToken),null!=b.expiresIn&&(a.fb_exp=b.expiresIn))}catch(c){}return a};b.autoLogin=function(){a.socialize.waitForService({service:"facebook",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){var c=a.external.facebook.getParams();!b&&c&&c.fb_at&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{facebook:{authToken:c.fb_at,tokenExpiresIn:c.fb_exp}}}))})}})};
a.events.global.add("facebookLoaded",g,"component");a.events.global.add("onFBCRefreshed",g,"component")})(b.facebook||(b.facebook={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b.initializedTime;b.isLoaded=function(){return null!=b.initializedTime};b.load=function(){var h=this;if(!b.initializedTime&&a.providersConfig.googlePlus){b.initializedTime=null;var g=document.createElement("script");g.type="text/javascript";g.async=!0;window.__gigya_handleClientLoad=function(){return h.handleClientLoad()};g.src="https://apis.google.com/js/client.js?onload=__gigya_handleClientLoad";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(g,
c)}};b.handleClientLoad=function(){try{delete window.__gigya_handleClientLoad}catch(h){window.__gigya_handleClientLoad=void 0}b.initializedTime=new Date;a.events.global.dispatch({eventName:"googlePlusLoaded"})};b.refreshSession=function(){};b.autoLogin=function(){a.socialize.waitForService({service:"googlePlus",callback:function(){a._.apiAdapter.isSessionValid(a.thisScript.globalConf,function(b){b||gapi.auth.authorize({client_id:a.providersConfig.googlePlus.clientId,scope:a.providersConfig.googlePlus.scopes,
immediate:!0,response_type:"code"},function(b){b&&b.code&&!a._.autoLoginInProgress&&(a._.autoLoginInProgress=!0,a.socialize.notifyLogin({providerSessions:{googlePlus:{code:b.code}}}))})})}})}})(b.googlePlus||(b.googlePlus={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(b){b._ready=null;b.executeOnInit=function(b,e){b&&(e||(e=2E3),a.external.backplane.isLoaded()?a.external.backplane.getChannelId()||a.external.backplane._ready?(a.external.backplane._ready=!0,b()):(window.setTimeout(function(){a.external.backplane._ready||(a.external.backplane._ready=!0,b())},e),Backplane(function(){a.external.backplane._ready=!0;b()})):b())};b.isLoaded=function(){return"undefined"!=typeof Backplane};b.getChannelId=function(){if(a.external.backplane.isLoaded())return Backplane.getChannelID()};
b.resetChannel=function(){a.external.backplane.isLoaded()&&Backplane.resetCookieChannel()};a.events.global.add("logout",a.external.backplane.resetChannel)})(b.backplane||(b.backplane={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(a){(function(a){a.getMetaTag=function(a){for(var b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if(b[c].getAttribute("property")==a&&b[c].getAttribute("content"))return b[c].getAttribute("content")}})(a.opengraph||(a.opengraph={}))})(a.external||(a.external={}))})(gigya||(gigya={}));
(function(a){(function(b){(function(a){a[a.LocalStorageListener=0]="LocalStorageListener";a[a.PostMessage=1]="PostMessage";a[a.Flash=2]="Flash"})(b.MessagingMethod||(b.MessagingMethod={}));b.checkCompleteRegistration=function(b,h,g){var c,f;if(206005==b.errorCode)a.accounts.finalizeRegistration({regToken:b.regToken,callback:function(a){g(a)}});else if(!h.dontHandleScreenSet&&((b.regToken||h.regToken)&&(200010==b.errorCode||403043==b.errorCode)||206001==b.errorCode||206002==b.errorCode||206003==b.errorCode||
403101==b.errorCode||403102==b.errorCode||403110==b.errorCode||403100==b.errorCode)){var d;403110==b.errorCode&&(d=f=!0);h.defaultMobileRegScreenSet&&a.localInfo.isMobile?c=h.defaultMobileRegScreenSet:h.defaultRegScreenSet&&(c=h.defaultRegScreenSet)}c?a.accounts.showScreenSet({newModal:d,initialResponse:b,screenSet:c,onHide:function(a){"finished"===a.reason&&a.user?g({errorCode:0,userInfo:a.user},!0,f):g(b)}}):g(b)};b.getGigyaSettings=function(b){var h=a.utils.localStorage.getItem("gigyaSettings");
try{h=a.utils.JSON.deserialize(h)}catch(g){h={}}h||(h={});return a.utils.JSON.serialize(h[b])};b.setGigyaSettings=function(b,h){var g=a.utils.localStorage.getItem("gigyaSettings");try{g=a.utils.JSON.deserialize(g)}catch(c){g={}}g||(g={});g[b]||(g[b]={});for(var f in h)g[b][f]=h[f];a.utils.localStorage.setItem("gigyaSettings",a.utils.JSON.serialize(g))};b.delGigyaSettings=function(b,h){if(b){var g=a.utils.localStorage.getItem("gigyaSettings");g&&(g=a.utils.JSON.deserialize(g),delete g[b],a.utils.localStorage.setItem("gigyaSettings",
a.utils.JSON.serialize(g)))}else a.utils.localStorage.removeItem("gigyaSettings")};b.handleSpecialFields=function(e){var h=a.socialize.Collection,g=function(a,c){for(var e=[],g=0,f=a[g];f;)e.push(new c(f)),e[g].identities&&b.convertIdentitiesArrayToObject(e[g]),f=a[++g];return e};e.photos&&(e.photos=new h(e.photos,"photoID"));e.albums&&(e.albums=new h(e.albums,"albumID"));e.contacts&&(e.contacts=new h(g(e.contacts,a.socialize.Contact),"email"));e.friend&&(e.friend=new h(g(e.friend,a.socialize.Friend),
"UID"));e.user&&(e.user=new a.socialize.User(e.user));if(e.friends&&e.friends instanceof Array){for(var c=[],f=0;f<e.friends.length;f++)c.push(e.friends[f].UID);e.UIDs=c.join(",");e.friends=new h(g(e.friends,a.socialize.Friend),"UID")}};b.convertIdentitiesArrayToObject=function(b){if(null==b.identities)b.identities={};else if(b.identities.constructor==Array){var h=b.identities;b.identities={};for(var g=0;g<h.length;g++)b.identities[h[g].provider]=new a.socialize.Identity(h[g])}};b.addUserInfoToEvent=
function(b,h,g,c){c=b.user||b.userInfo;null==h&&(h={});null!=c&&(h.user=a.utils.object.clone(c),null!=b.isLoggedIn&&(h.user.isLoggedIn=b.isLoggedIn),null!=b.isSiteUID&&(h.user.isSiteUID=b.isSiteUID),null!=b.iRank&&(h.user.iRank=b.iRank));g&&(a.utils.object.extractProperties(b,h,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|signKeysUIDSignature"),null!=h.user&&(h.UID=c.UID,h.isSiteUID=c.isSiteUID));return h};b.sendEmailNative=function(b){var h=b.userAction||{},g=h.linkBack||"";document.location.href=
"mailto:?to=&subject="+a.utils.URL.URLEncode(h.title||"")+"&body="+a.utils.URL.URLEncode(g);a.socialize.sendEmail(b,{dontSendEmail:!0})}})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function e(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.showConfig()},!0)}b._log=[];b._isEnabled=function(){return"1"==a.utils.cookie.get("_gig_dbgConsole_log")};b.addLog=function(e,g){if(a.log._isEnabled()){g=a.utils.object.clone(g,!0,!1,4,null,!0);var c=e;null!=g&&(c+=":"+("object"==typeof g?"\n":"")+a.utils.JSON.serialize(g,!0,!0));b._log.push(c);"object"==typeof console&&console.log(c);null!=document.getElementById("gigya_log")&&
a.log.show&&a.log.show()}};b.logCall=function(b,e,c){c||(c=e.lastSource);a.log.addLog("Calling "+b+(c&&c!=b?" for "+c:"")+(e.source&&c!=e.source?" initiated from "+e.source:"")+" with these params",e)};b.debug=e;b.showLog=function(){a.utils.script.load(a._.getCdnResource("/js/gigya.services.socialize.plugins.log.min.js"),null,function(){a.log.show()},!0)};b.show=function(){};b.showConfig=function(){};a.utils.functions.createAlias("gigya.debug",e)})(a.log||(a.log={}))})(gigya||(gigya={}));
var defaultObjects={},defaultObjectsDef={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",
person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},createDefaultObject=function(a){var b={};a=defaultObjectsDef[a];-1!=a.indexOf("+")&&(b=createDefaultObject(a.split("+")[0]),
a=a.split("+")[1]);a=a.split(",");for(var e=0;e<a.length;e++){var h="",g=a[e].split("|");if(1<g.length)try{h=gigya.utils.JSON.deserialize(g[1])}catch(c){}b[g[0]]=h||""}return b},_createConstructor=function(a){return function(b){var e=defaultObjects[a],h;for(h in e)this[h]=gigya.utils.object.clone(e[h]);if("object"==typeof b)for(h in b)"function"!=typeof b[h]&&(this[h]=gigya.utils.object.clone(b[h]))}},def;
for(def in defaultObjectsDef)defaultObjects[def]=createDefaultObject(def),gigya.socialize[def]=_createConstructor(def);gigya.socialize.Collection=function(a,b){this.arr=a;this._key=b?b:""};
gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(a){for(var b=0,e=this.arr[b];e;)a(e,b),b++,e=this.arr[b]},getById:function(a){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?this._hash:this.arr)[a]},getSize:function(){return this.arr.length},_buildHash:function(){var a=this._hash={},b=this._key;this.each(function(e,h){a["function"==typeof e[b]?e[b]():e[b]]=e})}};
gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(a){this.titleTemplate=a},getActor:function(a){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(a){this.actionName=a;return this},getActionName:function(a){return this.actionName},getTemplateFields:function(){var a=[],b;for(b in this.templateFields)a.push(this.templateFields[b]);
return new gigya.socialize.Collection(a,"fieldName")},setTemplateField:function(a,b,e){this.templateFields[a]={fieldName:a,text:b,href:e};return this},getTemplateField:function(a){return this.templateFields[a]?this.templateFields[a]:null},addTarget:function(a){if("object"==typeof a)return this.targets.push({UID:a.UID,nickname:a.nickname?a.nickname:""}),this;if("string"==typeof a)return this.targets.push({UID:a,nickname:""}),this},addActionLink:function(a,b){this.actionLinks.push({text:a,href:b?b:
""});return this},addMediaItem:function(a){this.mediaItems.push(a);return this},setTitle:function(a){a&&(this.title=a);return this},setLinkBack:function(a){a&&a.toString&&(a=a.toString());a&&(this.linkBack=a);return this},setUserMessage:function(a){this.userMessage=a?a:"";return this},setDescription:function(a){this.description=a?a:"";return this},addImage:function(a,b){this.addMediaItem({type:"image",src:a,href:b})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,
"UID")},setIconURL:function(a){this.iconURL=a;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(a){this.actionData1=a;return this},getActionData1:function(a){return this.actionData1},setActionData2:function(a){this.actionData2=a;return this},getActionData2:function(a){return this.actionData2},setSubtitle:function(a){this.subtitle=a;return this},getSubtitle:function(){return this.subtitle}};
(function(a){(function(b){(function(e){function h(a,b){"undefined"===typeof b&&(b=e.arProviders);for(var c=0;c<b.length;c++)if(b[c].name.toLowerCase()==a.toLowerCase())return b[c]}function g(a){if(null!=a){a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c].replace(/^\s+|\s+$/g,"");b.providers._aliases[d]&&(a[c]=b.providers._aliases[d])}return a.join(",")}}function c(a,b){"undefined"===typeof b&&(b=e.arProviders);for(var c=0;c<b.length;c++)if(b[c].ID==a)return b[c]}function f(a,b,c){"undefined"===
typeof b&&(b="");"undefined"===typeof c&&(c=e.arProviders);b=b.toLowerCase();b=b.split(" ").join("").split(".").join("").toLowerCase().split(",");b=m(b,c);for(c=0;c<b.length;c++)for(var d=0;d<a.length;d++){var g=a[d];(g=g.name||g.toString())&&(g=g.toLowerCase());g==b[c]&&a.splice(d,1)}return a}function d(a,b){null==b&&(b=[]);for(var c=[],d=0;d<a.length;d++){for(var e=a[d],g=!0,f=0;f<b.length;f++){for(var h=!1,k=0;k<e.arDefaultCapabilities.length;k++)if(e.arDefaultCapabilities[k].toLowerCase()==b[f].toLowerCase()){h=
!0;break}if(!h){g=!1;break}}g&&c.push(e)}return c}function k(){return e.arProviders.concat()}function p(b,c){"undefined"===typeof c&&(c=e.arProviders);b=(""+b).split(" ").join("").split(".").join("").toLowerCase();b=g(b);for(var d=(""+b).split(","),d=m(d,c),f=[],k=0;k<d.length;k++){var l=h(d[k],c);null!=l&&-1==a.utils.array.indexOf(f,l)&&f.push(l)}return f}function m(a,b){b||(b=e.arProviders);for(var c=[],d=0;d<a.length;d++)if("*"==a[d])for(var g=0;g<b.length;g++){for(var f=!1,h=0;h<a.length;h++)a[h].toLowerCase()==
b[g].name.toLowerCase()&&(f=!0);f||b[g].explicitOnly||c.push(b[g].name)}else c.push(a[d]);return c}e._aliases={};var l=function(){function a(b,c,d,g,f,h,k){this.ID=b;this.displayName=c;this.width=d;this.height=g;this.explicitOnly=h;this.aliases=k;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+d+",height="+g;this.arDefaultCapabilities=f.split(",");this.name=c.toLowerCase().split(" ").join("").split("!").join("").split(".").join("").split("+").join("plus");if(k)for(e._aliases||
(e._aliases={}),b=k.split("|"),c=0;c<b.length;c++)e._aliases[b[c]]=this.name;"messenger"==this.name&&(this.displayName="Microsoft");"customopenid"==this.name&&(this.displayName="OpenID")}a.prototype.toString=function(){return this.name};return a}();e.Provider=l;e.arProviders=[new l(64,"Facebook",650,400,"login,friends,places,status,actions,photos,offlineaccess,proxiedemail,checkins,facebookactions"),new l(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new l(72,
"Google+",560,600,"login,friends,contacts",!1,"google|googleplus"),new l(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications"),new l(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new l(1047,"Messenger",380,540,"login",!1,"messenger|microsoft"),new l(9832,"Instagram",440,420,"login,photos"),new l(9222,"Odnoklassniki",888,425,"login"),new l(9003,"Digg",730,590,"login",!0),new l(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),new l(8191,"Renren",450,350,"login,friends,status,actions"),
new l(8203,"QQ",570,460,"login"),new l(9821,"Sina",640,380,"login,status,actions"),new l(4228,"Mixi",1E3,720,"login,friends,actions,photos",!0),new l(9830,"Yahoo! JAPAN",980,700,"login",!0),new l(8205,"Spiceworks",640,380,"login",!0),new l(8190,"Kaixin",610,510,"login,friends"),new l(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new l(9800,"AOL",530,720,"login"),new l(4096,"WordPress",700,540,"login"),new l(256,"Blogger",760,400,"login"),new l(16,"LiveJournal",670,360,"login"),new l(1043,
"VeriSign",940,500,"login"),new l(1024,"Typepad",730,590,"login"),new l(4120,"OpenID",730,590,"login"),new l(4218,"Netlog",730,590,"login",!0),new l(4222,"SignOn",870,900,"login",!0),new l(4224,"Orange France",730,590,"login",!0),new l(5002,"Livedoor",970,700,"login",!0),new l(8202,"VZnet",610,510,"login"),new l(9216,"Skyrock",610,510,"login,friends,status",!0),new l(5004,"Fox News",730,590,"login",!0),new l(1051,"PayPal",400,550,"login",!0),new l(9058,"Amazon",785,510,"login",!0),new l(9219,"Xing",
785,510,"login,friends",!0),new l(8206,"WeChat",730,590,"login",!1,"wechat|weixin"),new l(4121,"Custom OpenID",730,590,"login",!0),new l(4122,"Custom SAML",730,590,"login",!0),new l(6002,"Site",730,590,"",!0)];e.getProviderByName=h;e.replaceProviderAliases=g;e.getProviderById=c;e.hideProvidersByName=f;e.getProvidersForRequiredCapabilities=d;e.getAllProviders=k;e.getProvidersByName=p;e.replaceWildcard=m;a.utils.functions.createAlias("gigya.socialize.getAllProviders",k);a.utils.functions.createAlias("gigya.socialize.replaceProviderAliases",
g);a.utils.functions.createAlias("gigya.socialize.getProvidersByName",p);a.utils.functions.createAlias("gigya.socialize._getProviderByName",h);a.utils.functions.createAlias("gigya.socialize.hideProvidersByName",f);a.utils.functions.createAlias("gigya.socialize._getProviderByID",c);a.utils.functions.createAlias("gigya.socialize.getProvidersForRequiredCapabilities",d)})(b.providers||(b.providers={}))})(a._||(a._={}))})(gigya||(gigya={}));
(function(a){(function(b){function e(){for(;b.queue&&0<b.queue.length;){var e=a.utils.object.clone(b.queue.splice(0,5),!0,!0);a.gscounters.sendReport({reports:e,noAuth:!h(e)})}}function h(a){for(var b=0;b<a.length;b++){var e=a[b];if("loadc"!==e.name&&"load"!==e.name||"loadc"===e.name&&e.reportData&&e.reportData.actionCounterPath)return!0}return!1}b.queue;b.trackAddressBarShares=function(){if(a.thisScript.globalConf.trackAddressBarShares){var b=a._.apiAdapter.getTokenParam(a.thisScript.APIKey,"UUID"),
c=document.location.href.split("#");1!=c.length&&""!=c[1]||document.location.replace("#guid="+(b?b:"_"))}};b.report=function(e,c,f,d,k,p,m){"undefined"===typeof p&&(p={});"undefined"===typeof m&&(m=!1);e=a.utils.object.removeUndefined({name:e,time:(new Date).getTime().toString(),source:d,sourceData:k,reportData:p,cid:f});m?(m=[e],a.gscounters.sendReport({reports:m,noAuth:!h(m)})):(b.queue||(b.queue=[]),b.queue.push(e))};b.init=function(){setInterval(e,5E3)};b.reportLoad=function(a,b){if(!b._reportedLoad){b._reportedLoad=
!0;var e="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(e="loadSimple"),this.report(e,b.APIKey,b.cid,b.source,b.sourceData))}}})(a.reports||(a.reports={}))})(gigya||(gigya={}));
(function(a){a.build||(a.build={version:"",time:""});a.providersConfig||(a.providersConfig={});a.isGigya||(a.isGigya=!0);a.partnerSettings||(a.partnerSettings={authMode:"cookie",baseDomains:"",plugins:{apiDomain:"us1.gigya.com"}});a.thisScript;(function(a){a.autoLoginInProgress})(a._||(a._={}));var b=a._,e;(function(e){function g(){if(a.abTesting)for(var b in a.abTesting)if("optimizely"===b){var c=a.abTesting[b];if(c.serviceParams&&c.serviceParams.hasOwnProperty("apiKey")){var d=window.location.pathname,
e=!1;if(c.disabledPaths)for(var f=0;f<c.disabledPaths.length;f++)if(-1<c.disabledPaths[f].indexOf(d)){e=!0;break}if(!e)for(f=0;f<c.enabledPaths.length;f++)-1<d.indexOf(c.enabledPaths[f])&&a.utils.script.load("//cdn.optimizely.com/js/"+c.serviceParams.apiKey+".js")}}}function c(b){"1"==a.utils.cookie.get("gig_debug")?a.socialize.showDebugUI({ignoreApiQueue:!0,waitForDebug:!1,onLoad:b}):b()}function f(){a.utils.functions.invokeOnPageLoad(function(){"undefined"!=typeof window.gigya_omniture_conf&&a.utils.script.load(a._.getCdnResource("/js/GenesisExchange_Gigya.min.js"))})}
function d(){var b=a.partnerSettings.baseDomains;if(b)for(var b=b.split(","),c=0;c<b.length;c++){var d=b[c],e=a.localInfo.pageDomain.indexOf(d);if(0<=e&&e==a.localInfo.pageDomain.length-d.length&&(0==e||"."==a.localInfo.pageDomain.charAt(e-1)))return d}return document.location.href.split("://")[1].split("/")[0]}function k(a){a||(a="en-US");a=a.replace("_","-").toLowerCase();var b=a.split("-"),c=b[0],b=1<b.length?b[1]:c,b=b.toUpperCase();switch(a){case "es-mx":b="ES";break;case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "te-st":case "fr-inf":case "de-inf":case "es-inf":case "nl-inf":break;
default:a=c}return{full:c+"-"+b,langCode:a,countryCode:b}}function p(b){for(var c=document.getElementsByTagName("script"),d,e=c.length-1;0<=e;e--){var f=c[e],g=f.src.toLowerCase();if(""!=g&&(-1<g.indexOf("//cdn.gigya.com")||-1<g.indexOf("//cdns.gigya.com")||-1<g.indexOf("?apikey="))&&(-1<g.indexOf("gigya.js")||-1<g.indexOf("socialize.js")||-1<g.indexOf("socialize2.js")||-1<g.indexOf("gsjssdk.js"))){d=f;break}}if(d&&!window.__gig_hidescript){var c=d.src.split("/"),e=a.utils.URL.getParamsFromURL(d.src,
!0)||{},h;if(""!=d.innerHTML.replace(/^\s+|\s+$/g,""))try{h=a.utils.JSON.deserialize(d.innerHTML),"object"!=typeof h&&(h={})}catch(l){alert("Gigya global configuration object parse error")}a.thisScript={scriptElement:d,protocol:0==d.src.toLowerCase().indexOf("https")?"https":"http",base:c[0]+"//"+c[2],APIKey:e.apikey,lang:k(e.lang||(h?h.lang:null)),globalConf:a.utils.object.merge([a.partnerSettings.plugins||{},h||{},window.__gigyaConf||{}]),URLParams:e};!a.thisScript.APIKey&&"object"==typeof console&&
console.warn?console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****"):a.thisScript.globalConf.APIKey=a.thisScript.APIKey;a.thisScript.globalConf.lang=a.thisScript.lang.langCode;b()}else 10>q?(q++,window.setTimeout(function(){p(b)},200)):(a.thisScript={scriptElement:null,protocol:"http:"==document.location.protocol?"http":"https",base:"https:"==document.location.protocol?"https://cdns.gigya.com":"http://cdn.gigya.com",
APIKey:"",lang:k(""),globalConf:{},URLParams:{}},b())}function m(d){var e=window.__gigAPIAdapterSettings,f="web";e&&"mobile"==e.getAdapterName()&&e.getAPIKey()==a.thisScript.APIKey&&(f="mobile");b.apiAdapter=b.apiAdapters[f].newApiAdapter(e);a.utils.functions.createAlias("gigya.auth.loginToken.getTokenParam",b.apiAdapter.getTokenParam);c(function(){b.apiAdapter.init(d)})}function l(){var c=a.utils.URL.getParamsFromURL(document.location.href);c.errorCode&&c.regToken&&b.checkCompleteRegistration(c,
a.thisScript.globalConf,function(){})}function n(){var b=a.localInfo,c;b.isIE11&&!window.indexedDB?(c=2,a.thisScript.globalConf.legacyCrossSiteMethod="localConnection"):c=b.isIE11||b.isIOSChrome?0:b.supportsPostMessage?1:2;b.messagingMethod=c}function r(){a.utils.queue.queueForExecution("API",function(){a.utils.functions.invokeOnPageLoad(function(){a.providersConfig.facebook&&a.external.facebook.load(!1);a.providersConfig.googlePlus&&a.external.googlePlus.load()})})}var q=0;(function(){if(window._isAPIProxy)b.apiAdapters.web.APIProxy.init();
else{a.utils.queue.hold("bootstrap","API");a.partnerSettings.baseDomain=d();var c=a.partnerSettings.plugins,e;e=a.partnerSettings.customAPIDomainPrefix?a.partnerSettings.customAPIDomainPrefix+"."+a.partnerSettings.baseDomain:a.partnerSettings.plugins.apiDomain;c.apiDomain=e;a.reports.init();p(function(){n();a.thisScript.globalConf.customEventMap&&a.events.addMap(a.thisScript.globalConf.customEventMap);m(function(){a.utils.queue.release("bootstrap","API");r();a._.chat.init();a.thisScript.globalConf.autoLogin&&
(a.external.facebook.autoLogin(),a.external.googlePlus.autoLogin());l();a.reports.trackAddressBarShares();a.utils.functions.invokeOnPageLoad(function(){return window.setTimeout(a.socialize.trackReferrals,1E3)})});f();g();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize");var b={sref:document.referrer};a.thisScript.globalConf.actionCounterPath&&(b.actionCounterPath=a.thisScript.globalConf.actionCounterPath);a.reports.report("loadc",a.thisScript.APIKey,null,null,null,b)})}})()})(e||
(e={}))})(gigya||(gigya={}));


} else if (typeof console == 'object' && console.warn) {
console.warn('**** Socialize.js loaded twice ****');
}
